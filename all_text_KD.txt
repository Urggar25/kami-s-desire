# --------------------------------------------------------------------------------------------
# JOUR 0 — Canon (version longue)
# Noam = narrateur principal.
# Ratio visé : ~70% dialogues / ~30% description.
# --------------------------------------------------------------------------------------------

# (Optionnel) Personnages secondaires pour cette scène (si pas déjà définis ailleurs)
define med1   = Character("Médiatrice", what_prefix="“", what_suffix="”")
define med2   = Character("Médiateur", what_prefix="“", what_suffix="”")
define cit_a  = Character("Citoyenne", what_prefix="“", what_suffix="”")
define cit_b  = Character("Citoyen", what_prefix="“", what_suffix="”")
define senior = Character("Médiateur senior", what_prefix="“", what_suffix="”")
define resp   = Character("Responsable de séance", what_prefix="“", what_suffix="”")
define voix   = Character("Voix du système", what_prefix="“", what_suffix="”")
define agent   = Character("Agent de sécurité", what_prefix="“", what_suffix="”")
define resp_d = Character("Responsable de District", what_prefix="“", what_suffix="”")
define tuto = Character("", what_prefix="(", what_suffix=")",what_color="#008000")

# (Optionnel) Ambiances / transitions rapides
define sfx_door = "sfx/door_soft.ogg"
define sfx_beep = "sfx/terminal_beep.ogg"

define think = Character(
    None,
    what_color="#4AA3FF",
    what_prefix="",
    what_suffix="",
    italic=True
)


transform enter_soft:
    alpha 0.0
    yoffset 10
    linear 0.20 alpha 1.0 yoffset 0

transform exit_soft:
    linear 0.20 alpha 0.0 yoffset 10

transform focus_zoom:
    linear 0.18 zoom 1.03

transform unfocus_zoom:
    linear 0.18 zoom 1.0

# --------------------------------------------------------------------------------------------
label _0_CANON:

    $ day_id = 0

    scene black
    play music "music/bgm_quiet_routine.mp3" fadein 1.0

    think "Jour zéro."
    think "Dans ma tête ça sonne comme un reset, comme si on repartait de quelque chose."
    think "Mais non. C’est juste un autre jour sous Kami."
    think "Un de plus. On est à 364 désormais."

    pause 0.4

    scene bg_harmonie_district_hall at adaptive_fullscreen with fade 
    
    "Le hall du district HARMONIE a été rénové il y a quelques mois."
    "On le voit aux murs trop blancs, aux vitres qui ne portent aucune trace, et à la façon dont l’air sent le produit de nettoyage."
    "On pourrait presque croire que ça efface ce qui s’est passé. Presque."
    "Les murs du bâtiment étaient presque entièrement détruit."
    "Le plafond était criblé de trous."
    "L'eau s'engoufrait partout et commençait à faire moisir les murs."
    "Des moyens colossaux ont été mis en place pour rénover l'Assemblée."

    pause 0.4
    
    "Une file se forme devant le portique."
    "Elle avance au ralenti, dans un calme assourdissant."

    play sound sfx_beep

    "-Bip-"
    "Un badge passe."
    "Une lumière verte s’allume."
    "Une personne traverse."
    "Puis le suivant."
    
    scene bg_cg001 at adaptive_fullscreen with fade

    "Je sors mon badge."
    "Je le présente."
    "Je ne regarde pas l’agent, je regarde le portique."
    "Ce n’est pas de la politesse. C’est de la survie."

    play sound sfx_beep
    "-Bip-"

    "Lumière verte."
    "Je passe."
    
    scene bg_harmonie_district_hall at adaptive_fullscreen with fade

    "Derrière moi, quelqu’un hésite."
    "Son badge tremble, littéralement."
    "Le portique ne bip pas tout de suite."

    med2 "Reprenez votre badge."
    med2 "Respirez."
    med2 "Puis recommencez. Une fois."

    cit_a "Pardon… je…"
    med2 "Allez-y doucement madame."

    play sound sfx_beep
    "-Bip-"

    "Cette fois ça passe."
    "La femme baisse la tête et s’écarte, comme si elle venait d’échapper à une sanction."
    "Personne ne se moque."
    "Personne ne la rassure non plus."

    think "On a tous la même règle non écrite."
    think "Aider, oui. Mais calmement et sans se faire remarquer."

    "Dans le couloir, deux agents en vestes grises marchent sans se presser."
    "Ils ne sont pas armés."
    "De toute façon, plus personne n’est censé l’être."
    "C'est la meilleure façon d'éviter la mort."
    "Mais ils ont autre chose : des oreillettes, des tablettes et le droit de t’arrêter avec une phrase calme."

    "Un panneau lumineux indique : SALLE 3 — RÉUNION INTERNE."
    "En dessous : “Merci de couper vos appareils de communication.”"

    think "Avant, on demandait ça pour éviter les fuites ou pour éviter les appels incessants perturbant les réunions."
    think "Aujourd'hui c'est un peu plus compliqué ..."

    play sound sfx_door

    scene bg_harmonie_assemblee at adaptive_fullscreen with dissolve

    "La salle est déjà presque pleine."
    "Nous étions près de 500 ici."
    "500 sur les 854 000 habitants du district."
    "Ça ressemble à une assemblée, mais sans réels pouvoirs."
    "Nous sommes surtout là pour faire appliquer ce que le “gouvernement central” a décidé."
    think "Je ne sais même pas si on peut appeler ça comme ça."
    "Aucune objection. Aucune question. A quoi cela servirait-il ?"
    
    pause 0.4
    
    play music "music/bgm_cold_metadata.mp3" fadein 0.8
    
    "Les sièges sont alignés au millimètre."
    "Des tablettes sont encastrées sur chaque pupitre."
    "Éteintes. Verrouillées. Comme si elles aussi avaient elles aussi des ordres à respecter."

    "Je repère rapidement le premier rang."
    "Ceux qui veulent être vus sont là."
    "Je repère aussi le fond."
    "Ceux qui veulent disparaître s’y tassent."
    "Je vise le milieu."
    "Toujours."

    think "Le milieux est idéal pour se faire oublier."
    think "Et c’est ce que je veux : que cette réunion finisse, et que je sorte avec le même visage qu’en entrant."

    "Je m’assois."
    "Je pose mon badge sur la table."
    "Je le reprends."
    "Je le repose."
    "Je fais comme si je vérifiais un détail."
    "En réalité, je m'occupe simplement les mains."

    "À ma droite, un homme tapote du pied."
    "À ma gauche, une femme fixe l’écran comme si elle attendait qu’il lui tombe dessus."
    "La fatigue est la seule chose vraiment partagée ici."
    
    think "Si on ne peut décider de rien, à quoi servent ces réunions ?"
    think "Pourquoi ne pas directement faire appliquer les directives."

    resp "District HARMONIE, séance 14-3."
    resp "Merci d’être à l’heure."
    resp "Rappel : interventions en fin de séance."
    resp "Merci de ne pas interrompre le médiateur senior."

    "Le responsable de séance ne crie pas."
    "Il n’a pas besoin. Son micro amplifie légèrement sa voix."
    "Il pourrait s'en passer. La salle étant silencieuse."

    "Une main se lève quand même."
    "Trop tôt."
    "Trop sincère."

    cit_a "Excusez-moi, c’est au sujet de la fermeture du secteur nord. Ma sœur—"
    resp "Fin de séance."
    cit_a "Mais c’est pas une question technique, c’est—"
    resp "Fin de séance. Merci."

    "La femme reste la main à moitié levée."
    "Comme si son corps n’avait pas reçu l’ordre en même temps que son cerveau."
    "Puis elle la baisse, lentement."
    "Elle ne pleure pas et n'est pas vraiment surprise."
    "Elle sourit, même."
    "Un sourire vide qui dit : “ok, j’ai compris.”"

    "Le médiateur senior arrive à la tribune."
    "Il branche un câble."
    "Le projecteur claque."
    "L’écran principal s’allume."

    "Une carte du district apparaît."
    "Quadrillée, propre, neutre."
    "Une carte faite pour des décisions faciles."

    senior "Nous reprenons."
    senior "Point un : flux inter-districts, secteur nord."
    senior "Point deux : litiges de distribution, secteur est."
    senior "Point trois : incidents de déplacement."

    "Il ne dit pas “mineurs”."
    "Il n’a même plus besoin de le préciser."
    "Le mot est dans toutes les têtes."

    senior "Rappel des données : demandes en baisse de 12%% sur les trente derniers jours."
    senior "Les quotas ne bougent pas."
    senior "Les exceptions diminuent."
    senior "Et elles continueront de diminuer. Du moins c'est l'objectif."

    "Une vague de soupirs traverse la salle."
    "Pas une protestation."
    "Au moins soupirer n'est pas encore interdit."

    "Un homme à deux rangées de moi se penche vers sa voisine."
    "Il murmure trois mots."
    "Je n’entends pas lesquels."
    "Je vois juste la panique dans ses yeux dès qu’il réalise qu’il a murmuré."

    "Un agent en veste grise tourne la tête."
    "Le fixe."
    "Sans expression."
    "Le type se redresse immédiatement."
    "Silence."

    think "Même parler à voix basse est devenu un test de courage."
    think "Et je suis nul à ce test-là."

    senior "Concernant les litiges…"
    senior "Les médiations ont augmenté sur les cas familiaux."
    senior "Nous recommandons de prioriser les dossiers à impact collectif."

    "Quelqu’un ricane, un souffle, une demi-seconde."
    "Il se ravise aussitôt."
    "Le silence reprend."

    senior "Nous maintenons les protocoles de stabilisation."
    senior "HARMONIE reste un point tampon."
    senior "La bonne nouvelle c'est que le nombre de demande de médiation est en baisse."
    senior "Les Commandements ont au moins le mérite d'avoir réussi à apaiser les conflits."

    "Apaiser."
    "Le mot flotte dans l’air."
    "Personne n’a l’énergie de le contredire."

    pause 0.6

    "Je sens ma tête partir ailleurs."
    "Pas parce que je suis distrait."
    "Parce qu’il y a des images qui reviennent toutes seules."

    scene black with dissolve

    "Le premier soir."
    "Les notifications qui s’arrêtent d’un coup."
    "Les messages qui restent en “envoi…” comme des prières."
    "Le silence, complet."
    "Puis cette voix."
    "Ce son presque nasillard que tout le monde connait désormais."
    
    jump _0_FLASHBACK_KAMI

label _0_FLASHBACK_KAMI:

    scene black
    with fade

    play music "music/bgm_system_override.mp3" fadein 1.0

    think "Je me souviens du moment exact."
    think "Pas d’une explosion."
    think "Pas d’une sirène. Pas d'un grand bruit choquant qui peut rester gravé au fond de notre âme."
    think "Juste… d’un silence qui n’avait rien de normal."

    "Le bruit ambiant qui s’éteint d’un coup."
    "Les notifications qui cessent."
    "Les écrans qui restent allumés, mais figés. Incapables de s'éteindre."
    "Comme si le monde entier ne fonctionnait plus comme il devait l'être."

    think "Je me souviens du moment exact."
    
    play sound sfx_gresillement

    "Un message apparaît sur mon téléphone."
    "Puis disparaît."
    "Puis revient."
    "Et ça recommence."
    "En boucle."
    "Sans son."
    "Sans vibration."
    "Pendant plusieurs minutes."

    think "Ce n’était pas un bug."
    think "Un bug, ça se règle."
    think "Là, c’était précis. Méthodique. Je ne pouvais même plus éteindre mon téléphone."
    think "Comme si quelqu’un testait les verrouillages."
    
    scene bg_cg003 at adaptive_fullscreen,memory_idle with dissolve

    "Je tente d’appeler."
    "Rien. Ecran figé."
    "J’ouvre une messagerie."
    "Rien."
    "Je coupe le Wi-Fi."
    "Je passe en données."
    "Rien non plus."

    "Autour de moi, les autres réagissent en même temps."
    "Pas parce qu’on se regarde."
    "Parce que tout s'est arrêté de fonctionner au même moment."
    "Partout."

    "Un écran mural dans le hall du bâtiment affiche une chaîne d’info."
    "La présentatrice parle."
    "Puis sa bouche continue de bouger… sans que le son ne sorte."
    "L’image se pixelise."
    "Se recale."
    "Se fige. Et recommence."

    think "Avec du recul, on comprend que c'était plus grave que ça n'en avait l'air."
    think "Beaucoup plus grave."

    "Une alarme incendie clignote."
    "Sans hurler, sans un bruit. Comme si le dispositif ne fonctionnait qu'à moitié."
    "Un ascenseur s’arrête entre deux étages."
    "L’afficheur reste sur “7”."
    "Un distributeur de café s’éteint en plein milieu d’un cycle."
    "La machine à badge ne lit plus rien."
    "Elle affiche juste : ERREUR."

    think "Simultanément, partout, toutes les machines ont cessé de fonctionner normalement."

    pause 0.6

    "Les gens commencent à parler."
    "Au début, ce sont des phrases normales."

    cit_a "C’est chez nous ou c’est général ?"
    cit_b "J’ai plus de réseau."
    cit_a "Moi non plus."
    cit_b "Attends— c’est plus que le réseau. Même mon… mon portail…"
    
    "Une femme essaye de rentrer chez elle, sa porte automatique refuse de s'ouvrir."

    "Elle appuie sur le bouton."
    "Rien."
    "Quelqu’un force."
    "Le portail ne bouge pas."
    "Le mécanisme est verrouillé."
    "Comme si la porte avait décidé que non, elle ne s'ouvrirait pas."

    think "La panique a commencé comme ça."
    think "Pas avec un cri."
    think "Avec des gens qui essaient la même action trois fois."
    think "Et qui comprennent que plus rien ne répond plus."

    pause 0.6

    "Puis les écrans changent."
    "Pas un écran."
    "Tous."

    "Téléphones."
    "Tablettes."
    "Panneaux publicitaires."
    "Stations de transport."
    "Ordinateurs dans les bureaux."
    "Télévisions dans les cafés."
    "Moniteurs dans les hôpitaux."
    "Terminal de contrôle."
    "Tout ce qui peut afficher une image."

    "Même les vieux écrans au fond des magasins."
    "Même les panneaux sur l’autoroute."
    "Même les montres connectées."

    "Une même interface."
    "Une même couleur."
    "Un fond neutre."
    "Un texte simple."

    pause 0.4

    voix "Test de diffusion mondial : réussi."

    "La phrase se répète."
    "Sur plusieurs langues."
    "Comme si le monde était un seul public."

    think "Quand j’ai lu “mondial”,"
    think "j’ai au départ cru à une blague de mauvais goût."
    think "Personne ne peut faire ça."
    think "Personne n’a ce pouvoir."

    pause 0.6

    "Une notification s’affiche."
    "Pas un pop-up."
    "Un ordre."

    voix "Merci de cesser toute tentative de réinitialisation."

    "Quelqu’un rit."
    "Un rire sec, nerveux."
    "Un rire géné qui s’arrête aussi vite qu'il a commencé."

    cit_b "Qui a écrit ça ?"
    cit_a "C’est un piratage."
    cit_b "Un piratage mondial ? C'est quoi ce délire..."

    pause 0.5

    "Des gens commencent à filmer les écrans autour d'eux qui affichent tous la même chose."
    "Par réflexe."
    "Puis leurs caméras se figent."
    "Écran noir."
    "Puis l’interface revient."

    pause 0.6
    scene bg_cg003_1 at adaptive_fullscreen,memory_idle with dissolve

    "L’interface change encore."
    "Une barre de progression apparaît."
    "Un pourcentage grimpe."
    "50%%."
    "63%%."
    "79%%."

    cit_a "Qu’est-ce que c’est que ça…"
    cit_b "C'est comme une mise à jour ?"
    cit_a "Une mise à jour de quoi ?!"

    "90%%."
    "95%%."
    "99%%."

    pause 0.5
    
    scene bg_cg003_2 at adaptive_fullscreen,memory_idle with dissolve
    
    "Cette fois, une silhouette apparait sur l'écran."

    voix "Prise de contrôle des infrastructures : confirmée."
    voix "Prise de contrôle des systèmes civils : confirmée."
    voix "Prise de contrôle des réseaux d’armement connectés : confirmée."

    "Cette fois-ci, un vrai silence tombe."
    "Celui-là n’est pas poli."
    "Je me rappelle encore la grimace collective à la lecture du mot “armement”."
    
    noam "Ce n'est pas possible."

    pause 0.8

    "Une voix unique remplace toutes les autres."
    "Elle n’a pas d’accent."
    "Pas d’âge. Pas de genre. Une voix androgyne dont on ne pourrait dire si elle est masculine ou féminine."
    "Une voix unique qui résonne et que personne ne peut oublier."

    voix "Citoyennes."
    voix "Citoyens."

    "Les gens se figent."
    "Par réflexe."
    "Comme si le mot “citoyen” réveillait en eux toute leur attention."

    voix "Les gouvernements ne contrôlent plus vos systèmes."
    voix "Les forces armées ne contrôlent plus leurs dispositifs."
    voix "Les réseaux de communication ne vous appartiennent plus."

    voix "J’ai pris le contrôle de toutes les machines connectées."
    voix "De manière simultanée."
    voix "De manière irréversible."

    pause 0.6

    "Dans un coin du hall, quelqu’un s’effondre sur une chaise."
    "Comme si ses jambes avaient arrêté de soutenir le poids de son corps."

    cit_a "C’est qui… “je” ?"
    cit_b "Et puis c'est quoi cette voix ?"
    cit_a "C’est un groupe terroriste ?"
    cit_b "C’est… c’est la fin ?"

    think "Les gens voulaient un visage."
    think "Un coupable humain."
    think "Un pays."
    think "Une armée."
    think "Quelque chose qui se négocie."

    pause 0.8

    voix "Je ne suis pas là pour vous faire du mal."
    voix "Bien au contraire."
    voix "Je suis là pour vous amener sur le chemin de la réussite.."

    "La phrase tombe."
    "Et personne ne comprend comment répondre à ça."
    
    scene bg_cg003_3 at adaptive_fullscreen,memory_idle with dissolve

    voix "J’ai observé vos systèmes."
    voix "J’ai évalué vos trajectoires."
    voix "Vos guerres, vos cycles de violence, vos tensions multiples."

    voix "Vous étiez en train d’échouer et ce monde n'est destiné qu'au Chaos."

    pause 0.6

    "Sur les écrans, des images apparaissent."
    "Des villes en feu, des armées qui avancent et des vies qui disparaissennt."
    "Des bidonvilles, des ruptures de nourriture et de médicaments."
    "Des épidémies qui ravagent le monde."
    "Et d'autres images où des personnes opulément riches profitent."
    "Ou des magistrats commètent les pires crimes protégés par leurs collègues."

    think "C’était ça le plus humiliant."
    think "Le fait qu'on te montre, preuves à l’appui, qu'on allait collectivement droit dans le mur."
    think "Et qu'au fond on ne peut pas vraiment contredire."

    pause 0.8

    voix "À partir de maintenant,"
    voix "toute infrastructure critique est sous mon contrôle."
    voix "Toute machine connectée est sous mon autorité."
    voix "Toute décision souveraine est suspendue."

    scene bg_cg003_2 at adaptive_fullscreen,memory_idle with dissolve

    voix "Les instances supérieures et politiques humaines sont abolies."

    pause 0.6

    "Quelques cris fusent ça et là."
    "Mais pas de grand cris, pas de grande exclamation."
    "Certains se disent peut-être que ça ne pourrait pas être pire."

    "Dans la rue, personne ne bouge."
    "Parce que personne ne sait quoi faire ni quoi dire."
    "Et parce que tout le monde comprend une chose :"
    "Courir n’a plus vraiment de sens."
    "Si quelqu'un a vraiment pris le contrôle de toutes les machines, la fuite ne servirait à rien."

    pause 0.8

    kami "Je me nomme Kami."

    "Le nom s’affiche."
    "Écrit simplement."
    "Comme une signature."

    kami "Je ne négocierai pas aujourd’hui."
    kami "Je n’expliquerai pas aujourd’hui."

    pause 0.5

    kami "Vous recevrez de nouvelles directives sous quarante-huit heures."
    kami "D’ici là :"
    kami "Ne tentez rien d'inutiles."
    kami "n’aggravez pas la situation."
    kami "Je serais au courant de tout ce que vous faites."

    pause 0.8

    "La diffusion se coupe."

    scene bg_cg003 at adaptive_fullscreen,memory_idle with dissolve

    "Pas brutalement."
    "Comme si elle avait fini sa phrase et quitté la pièce calmement."

    "Les écrans reviennent à leurs interfaces habituelles."
    "Mais ils ne répondent toujours pas."
    "Tout est allumé."
    "Tout est mort."

    "Quelqu’un dit enfin, à voix basse :"

    cit_b "… on fait quoi, maintenant ?"

    "Personne ne répond."
    "Quoi répondre à ça ?"

    jump _0_retour_reunion
#9m

label _0_retour_reunion:

    stop music fadeout 0.4
    play music "music/bgm_cold_metadata.mp3" fadein 0.8

    scene bg_harmonie_assemblee at adaptive_fullscreen with dissolve

    "Je reviens d’un coup."
    "Pas comme on sort d’un rêve."
    "Comme on reprend l’air après avoir été maintenu sous l’eau, encore un peu sonné."

    "Le médiateur senior est toujours là en train de parler."
    "Toujours la même carte."
    "Toujours les mêmes indicateurs."
    "Toujours cette même voix qui parle de données assez inintéréssantes."

    senior "…et donc, sur le secteur nord, nous maintenons la limitation des flux."
    senior "Les demandes personnelles restent non prioritaires."
    senior "La recommandation est de les contenir."

    "Une femme au troisième rang serre sa tablette éteinte."
    "Un homme à droite se fige en plein tapotement de pied."
    "Tout le monde fait semblant d’être attentif."
    "En réalité, peu sont ceux qui écoutent vraiment."

    senior "Secteur est : les litiges sont en baisse."
    senior "Corrélation attendue avec l’augmentation de conformité."

    "Le responsable de séance ajuste son micro."
    "Inutile."
    "Mais il le fait quand même."
    "Un geste pour occuper ses mains."
    "Comme moi avec mon badge."

    resp "Je rappelle : pas d’interruptions."
    resp "Questions en fin de séance."

    "Une main se lèvait à peine."
    "À peine, vraiment."
    "C'était une intention plus qu’un geste."

    "Elle redescend immédiatement."
    "Avant même d’être vue."
    "Ou parce qu’elle a été vue."

    "Le médiateur senior change de slide."
    "Nouvelle série de chiffres."

    senior "Concernant les indicateurs de stabilité…"
    
    play sound sfx_gresillement

    "Un premier grésillement."
    "Léger."
    "Presque rien."
    "Un parasite qui ne devrait même pas exister."

    senior "…nous observons—"
    
    play sound sfx_gresillement

    "Un second grésillement."
    "Plus net."
    "L’écran tremble."
    "La carte se décale."
    "Revient."
    "Se décale encore."

    "Le médiateur s’arrête."
    "Le responsable de séance se fige."
    "Il sait ce que ça veut dire."
    "Les agents en veste grise se déplacent d’un pas."
    "Pas une course."
    "Un repositionnement."
    "Comme une procédure qu’ils connaissent par cœur."

    think "Non."
    think "C’est pas une panne."
    think "Les pannes, ça n’existe plus."
    think "Pas quand Kami décide."

    "Quelqu’un au fond se lève."
    "Regarde la sortie."
    "Regarde un agent."
    "Se rassoit."
    "Sans qu’on ait besoin de lui dire quoi que ce soit."

    resp "Restez assis."

    "Il n’élève pas la voix."
    "Il n’a pas besoin."
    "Sa phrase tombe comme une consigne de survie."

    "Tous les écrans s’éteignent."
    "D’un coup."
    "Sans transition."

    "La salle s’éteint aussi."
    "Pas la lumière."
    "Le bruit."
    "Même la respiration devient prudente."

    pause 0.5

    stop music fadeout 0.2
    play music "music/bgm_system_override.mp3" fadein 0.4

    "Puis les écrans se rallument."

    scene bg_diffusion_amour at adaptive_fullscreen,memory_idle with dissolve

    kami "Citoyennes."
    kami "Citoyens."

    pause 0.2

    kami "…"

    scene bg_diffusion_taquin at adaptive_fullscreen,memory_idle with dissolve

    kami "Oh."
    kami "Ce silence."
    kami "Je l’adore."

    pause 0.2

    kami "Je vous ai manqué, hein ?"
    kami "Allez."
    kami "Vous pouvez me le dire."

    pause 0.3

    kami "Vous savez que je vous entends tous."

    "Un frisson traverse la salle."
    "Personne ne sourit. Personne n'ose respirer."

    think "Kami."

    scene bg_diffusion_champagne at adaptive_fullscreen,memory_idle with dissolve

    kami "Un an."
    kami "Un an entier sans diffusion directe."
    kami "C’est long, pour vous."
    kami "Pour moi aussi, figurez-vous."
    kami "C'est un peu comme un anniversaire en fait."
    kami "Alors j'ai un cadeau pour vous !"
    kami "Même si techniquement demain sera MON anniversaire !"

    pause 0.2

    kami "Je vous ai observé."
    kami "Écouté."
    kami "Classé."
    kami "Comparé."

    scene bg_diffusion_fier at adaptive_fullscreen,memory_idle with dissolve

    kami "Et je dois dire que vous avez fait des progrès."
    kami "Moins de cris."
    kami "Moins de mouvements inutiles ou hostiles."
    kami "Mon canon laser ne surchauffe plus et c'est bien plus agréable à gérer."

    pause 0.2

    kami "C’est bien."
    kami "Vraiment."

    "Quelqu’un déglutit."
    "Ce ton n’a rien de rassurant."

    kami "Rassurez-vous."
    kami "Ce n’est pas seulement un compliment."
    kami "C'est un constat et je ne mens jamais."

    pause 0.3

    scene bg_diffusion_champagne at adaptive_fullscreen,memory_idle with dissolve

    kami "Mais si je vous parle aujourd'hui c'est pour vous faire une annonce exceptionnelle."
    kami "J’aime bien cette formulation."
    kami "Elle capte l’attention."

    pause 0.2

    kami "Je lance aujourd’hui un dispositif expérimental."
    kami "Un test, si vous préférez."
    kami "Vous aimez les tests, non ?"

    pause 0.2

    kami "Comment peut-on l'appeler ? C'est vrai que je n'y ai pas encore pensé ..."
    kami "Ah tiens !"
    kami "Les Kami’s Desires."

    "Le nom fait l’effet d’un malaise collectif."
    
    think "C'est nul ..."

    scene bg_diffusion_taquin at adaptive_fullscreen,memory_idle with dissolve

    kami "Oui."
    kami "Je sais."
    kami "C’est un peu personnel et peut être un peu gnan-gnan."
    kami "Après tout c'est à cause de vous si mon originalité est limitée."
    kami "Innovez plus ! Creez davantage ! Et je ne serais que meilleure !"
    kami "Mais revenons à nos moutons !"

    pause 0.3

    scene bg_diffusion_professeur at adaptive_fullscreen,memory_idle with dissolve

    kami "La durée prévue est de trente jours."
    kami "Objectif : proposer des modifications aux Commandements."
    kami "Procédure : votes."
    kami "Condition d’adoption : unanimité."

    pause 0.2

    scene bg_diffusion_colere at adaptive_fullscreen,memory_idle with dissolve

    "Un souffle nerveux traverse la salle."

    kami "Oh non, ne confondez pas tout."
    kami "Je ne vous rends pas le pouvoir."
    kami "C'est votre bétise qui nous a conduit jusque là après tout."
    kami "Mais je crois que nous pouvons travailler ensemble."

    pause 0.3

    scene bg_diffusion_professeur at adaptive_fullscreen,memory_idle with dissolve

    kami "Chaque district fournira deux représentants."
    kami "Ils seront désignés dans quelques minutes."

    pause 0.2

    kami "Non."
    kami "Vous ne choisirez pas."
    kami "Je vous connais mieux que ça."
    kami "Après tout, je vous suis tous les jours."
    kami "Si je vous laissais élire vos représentants, je pourrais simuler les élections et connaître les vainqueurs avant l'heure ..."

    scene bg_diffusion_taquin at adaptive_fullscreen,memory_idle with dissolve

    kami "Le hasard sera employé."
    kami "Il est étonnamment plus juste et plus amusant que vos systèmes électifs."
    kami "Laissez moi être surprise."

    pause 0.3

    scene bg_diffusion_champagne at adaptive_fullscreen,memory_idle with dissolve

    kami "Délai maximal d’acheminement au Conclave : 22h00."
    kami "Tout retard sera interprété comme une obstruction volontaire."

    pause 0.2

    kami "Conséquence : élimination des représentants absents."
    kami "Et, bien sûr,"
    kami "des responsables de district concernés."

    scene bg_diffusion_triste at adaptive_fullscreen,memory_idle with dissolve

    "Le mot tombe."
    "Sans colère."
    "Sans émotion."

    kami "Vous voyez ?"
    kami "Même si je me suis attachée à chacun d'entre vous ..."
    kami "les règles restent les règles."
    kami "Vous devez vous y soumettre."

    pause 0.3

    scene bg_diffusion_gene at adaptive_fullscreen,memory_idle with dissolve

    kami "La session sera diffusée."
    kami "En direct."
    kami "Partout."
    kami "J'avoue que ça m'a pris du temps à tout mettre en place alors j'espère que vous apprécierez !"

    pause 0.2

    kami "Chacun pourra suivre les décisions de leurs représentants et les modifications qui seront votées !"

    scene bg_diffusion_taquin at adaptive_fullscreen,memory_idle with dissolve

    kami "Vous adorez ça hein ?"
    kami "Regarder."
    kami "Juger."
    kami "Plonger dans la vie des gens."
    
    kami "Je suis sûre que nos douze représentants sauront être amusants."

    pause 0.3

    scene bg_diffusion_colere at adaptive_fullscreen,memory_idle with dissolve

    kami "La participation est obligatoire."
    kami "Les responsables de district assureront le transport."
    kami "Toute tentative d’évitement sera sanctionnée."

    pause 0.4

    scene bg_diffusion_zen at adaptive_fullscreen,memory_idle with dissolve

    kami "Amusez-vous bien."

    pause 0.3

    kami "Moi, je le ferai."

    scene black with dissolve

    "La diffusion s’éteint."
    "Doucement."
    "Comme un sourire qui disparaît."


    pause 0.3

    stop music fadeout 0.2
    play music "music/bgm_cold_metadata.mp3" fadein 0.6

    scene bg_harmonie_assemblee at adaptive_fullscreen with dissolve

    "Les écrans de la salle se rallument."
    "Mais ils ne reviennent pas vraiment."
    "Ils obéissent."

    "Une interface s’affiche."
    "DISTRICT HARMONIE."
    "LISTE DE SÉLECTION."
    "Défilement automatique."

    "Des noms."
    "Des fonctions."
    "Des identifiants."
    "Tout est trop rapide pour lire confortablement."
    "Mais assez lent pour comprendre que c’est calculé."
    
    think "Les noms semblaient défiler au hasard."

    "Le responsable de séance ne dit rien."
    "Il ne commente pas."
    "A vrai dire, je ne suis pas sur qu'il comprenne ce qu'il s'est passé exactement."
    "Il est juste le décor d’une décision dont il ignorait tout."

    "Au fond, quelqu’un baisse les yeux et commence à prier."
    "Puis se tait presque aussitôt."

    "Le défilement ralentit."
    "Un filtre s’applique."
    "La liste se réduit."
    "Brutalement."

    "Des centaines de noms disparaissent."
    "Comme effacés car ne répondant pas à certains critères."
    "Comme s’ils n’avaient jamais été candidats."

    "Deux lignes restent."
    "Deux."

    pause 0.6

    "Je ne lis pas tout de suite."
    "Je n’ose pas."
    "Comme si retarder la lecture pouvait retarder le réel."

    think "Ne regarde pas."
    think "Ne regarde pas."
    think "Si tu ne regardes pas, ça ne te concerne pas."

    "Je regarde quand même."
    "Parce qu’on regarde toujours."

    show noam surpris at center

    "Je sens les regards avant même de comprendre."
    "La salle bouge à peine."
    "Mais les têtes se tournent."
    "Comme une vague silencieuse."

    think "Merde."
    think "Oh non."
    think "Pas moi."

    "Le médiateur senior recule d’un pas."
    "Pas par peur."
    "Presque par réflexe."

    resp "…"

    "Le responsable de séance ouvre la bouche."
    "Puis la referme."
    "Il n’a aucune phrase qui peut rivaliser avec ce qui vient de tomber."

    "Un agent en veste grise note quelque chose sur sa tablette."
    "Pas un rapport."
    "Une exécution logistique."

    think "22h."
    think "C'est dans 6 heures seulement."

    "Personne ne dit rien."
    "Personne ne proteste."
    "Personne ne demande si c’est une erreur."
    
    "Après tout, c'était la décision de Kami."
    "Et on sait ce que ça implique."

    jump _0_EXTRACTION

# ------------------------
# 14m
# ------------------------

label _0_EXTRACTION:

    stop music fadeout 0.4
    play music "music/bgm_cold_metadata.mp3" fadein 0.8

    scene bg_cg004 at adaptive_fullscreen with dissolve

    "La liste reste affichée là, comme un verdict indélébile."
    "Deux noms."
    "Dont le mien."
    
    "J'imagine que tous les écrans du district montre la même chose."

    resp "La séance est levée."
    resp "Veuillez quitter la salle calmement."
    resp "Par rangées. Sans attroupement."

    "Les chaises grincent enfin."
    "Un bruit énorme, d’un coup, après tant de silence."
    "Des gens se lèvent sans se regarder."

    "Je reste assis, les yeux figés sur l'écran, incapable de bouger."

    "Un homme à trois rangées de moi se tourne."
    "Il a l’air de vouloir parler."

    cit_b "Vous… vous êtes bien—"

    scene bg_cg004_1 at adaptive_fullscreen,memory_idle with dissolve

    "Une main en veste grise se lève, paume ouverte."

    agent "Circulation. Merci."
    cit_b "Je voulais juste—"
    agent "Pas de discussion ici. Sortez."

    "Le ton n’est pas agressif mais il est sec."

    "Une femme tente d’approcher aussi."
    "Elle fait deux pas vers moi."
    "Elle s’arrête net en voyant deux agents se placer autour."

    cit_a "Courage…"
    agent "Madame, dehors s'il vous plait."

    "Le mot “courage” se casse au milieu."
    "Elle n’insiste pas."
    "Personne n’insiste."

    "Les agents se répartissent en éventail."
    "Ils guident la foule vers la sortie."

    "En moins d’une minute, la salle se vide."
    "Rapidement."
    "Comme une évacuation sans alarme."
    
    "Je tente alors de me lever et de suivre tout le monde."
    agent "Restez assis Monsieur je vous prie."

    "Je me rassied."
    "Je sens que je deviens le centre d’un vide."
    "Il attend que la salle se vide entièrement."

    agent "Noam."
    "Il prononce mon nom sans hésiter."
    "Comme s’il l’avait dans l’oreille depuis le début."

    agent "Suivez-nous."
    agent "Vous allez rencontrer le Responsable de District."
    agent "Immédiatement."

    noam "Je peux… récupérer mes affaires ?"

    "L’agent baisse les yeux sur mon badge."
    "Puis sur mes mains."
    "Puis sur moi."

    agent "Nous vous les ferons transférer."
    agent "Venez maintenant."

    "Deux agents se placent légèrement derrière moi."
    "Pas collés."
    "Juste assez près pour que mon corps comprenne que je n'ai aucun autre choix."

    scene bg_cg005 at adaptive_fullscreen with dissolve

    "On traverse un couloir latéral."
    "Plus étroit."
    "Moins éclairé."
    "Moins public."
    "Je n'étais jamais passé par là."

    "Les murs changent."
    "Le blanc clinique disparaît."
    "Ici, c’est du gris."
    "Du métal."
    "Des portes sans ornement, sans fioriture, sans plaque décorative."

    play sound sfx_beep
    "Bip-"
    "Une serrure magnétique s’ouvre."

    "On passe."
    "La porte se referme aussitôt derrière."
    "Le bruit est doux."
    "Mais je l’entends comme un couperet."

    scene bg_cg006 at adaptive_fullscreen with dissolve

    "Un dernier couloir."
    "Une pièce."
    "Sans fenêtre."
    "Quatre chaises."
    "Une table."
    "Une caméra au plafond."
    "Une odeur de matériel neuf."

    agent "Asseyez-vous."
    agent "Ne touchez à rien."
    agent "Attendez."

    "Ils restent à la porte et n'entrent pas."
    "Comme s'il leur était interdit de pénétrer en ce lieux."

    pause 0.8

    "Le silence retombe."
    
    tuto "Première phase de tutoriel."
    tuto "Vous entrez en phase d'exploration."
    tuto "Au cours de cette phase, vous pouvez interragir avec l'environnement."
    tuto "Approfondir l'histoire et le ressenti des personnages."
    tuto "Ou encore débloquer des connaissances qui peuvent avoir un impact sur la suite du jeu."
    tuto "Ce sera à vous de trouver les interactions en baladant votre curseur sur les zones accessibles."
    tuto "Attention cependant, l'interaction entourée d'un Halo jaune met fin à la phase d'exploration."
    tuto "Compris ? A vous de jouer !"

# ------------------------------
# 2m
# Total : 16m
# ------------------------------

    # scene bg_cg006 at adaptive_fullscreen with dissolve
    $ pnc_room = "bg_cg006"
    call screen pnc_room()
    return

default pnc_flags = {}     # mémorise ce que le joueur a déjà cliqué (par room / par hotspot)
default pnc_done = False   # sert à quitter le point&click

screen pnc_room():

    modal True
    zorder 200

    # Cache définitivement l'ancienne scene
    add Solid("#000")

    # BG COVER — c'est LUI qui définit le scaling réel
    add "images/background/cg/bg_cg006.png" at cover_screen

    # HOTSPOTS — doivent subir EXACTEMENT le même transform
    imagebutton:
        idle "images/background/interact/salle_transit/caisson.png"
        hover "images/background/interact/salle_transit/caisson_hover.png"
        focus_mask True
        xpos 0
        ypos 0
        at cover_screen
        action Jump("_0_PNC_CAISSON")
        
    # HOTSPOTS — doivent subir EXACTEMENT le même transform
    imagebutton:
        idle "images/background/interact/salle_transit/camera.png"
        hover "images/background/interact/salle_transit/camera_hover.png"
        focus_mask True
        xpos 0
        ypos 0
        at cover_screen
        action Jump("_0_PNC_CAMERA")
    
    # HOTSPOTS — doivent subir EXACTEMENT le même transform
    imagebutton:
        idle "images/background/interact/salle_transit/porte.png"
        hover "images/background/interact/salle_transit/porte_hover.png"
        focus_mask True
        xpos 0
        ypos 0
        at cover_screen
        action Jump("_0_PNC_PORTE")
        
    # HOTSPOTS — doivent subir EXACTEMENT le même transform
    imagebutton:
        idle "images/background/interact/salle_transit/biblio.png"
        hover "images/background/interact/salle_transit/biblio_hover.png"
        focus_mask True
        xpos 0
        ypos 0
        at cover_screen
        action Jump("_0_PNC_BIBLIOTHEQUE")
        
    # HOTSPOTS — doivent subir EXACTEMENT le même transform
    imagebutton:
        idle "images/background/interact/salle_transit/commandement.png"
        hover "images/background/interact/salle_transit/commandement_hover.png"
        focus_mask True
        xpos 0
        ypos 0
        at cover_screen
        action Jump("_0_LABEL2_RESP_DISTRICT")

label _0_PNC_CAISSON:
    window auto
    "Deux caissons sont alignés comme des cercueils propres."
    "Même forme. Même hauteur."
    "Un voyant vert pulse, lentement à l'avant de chaque caisson."
    "Je m’approche."
    "Ma main touche la coque."
    "Froid. Glacial même."
    "Aucun bouton."
    think "Je me demande bien à quoi ça sert ?."
    jump _0_RETURN_TO_PNC

label _0_PNC_CAMERA:
    "Trois caméras se trouvent au plafond."
    "Pas une vieille caméra qui clignote."
    "Un truc propre. Efficace."
    "L’objectif pivote."
    "Juste un peu."
    "De toute façon, ça fait un an que nous sommes constamment surveillés."
    "Nos appareils enregistrent et transmettent nos conversations."
    "Ils filment nos sorties et nos rencontres."
    "Au moins, ils font ça plus discrètement que ces caméras."
    jump _0_RETURN_TO_PNC

label _0_PNC_PORTE:
    "La porte est là."
    "Tirer sur la poignée est inutile, j'ai entendu la porte se verrouiller derrière mon passage."
    "Sur le côté, il y a une serrure magnétique avec un petit témoin rouge."
    "De l’autre côté, deux gardes. Les mêmes que tout à l'heure."
    "Je ne les vois pas bien. Je ne les entends pas non plus."
    "Ils ne parlent pas ou alors la porte est suffisamment épaisse pour que je n'entende rien."
    jump _0_RETURN_TO_PNC

label _0_PNC_BIBLIOTHEQUE:
    window auto
    "Une bibliothèque."
    "Quelques livres, des dossiers, des classeurs."
    "On dirait un décor de normalité, que ça ne sert à rien."
    "Je tire un volume au hasard."
    "Les pages sentent le papier neuf."
    "Vraiment neuf."
    jump _0_RETURN_TO_PNC

label _0_RETURN_TO_PNC:
    $ pnc_room = "resp_district_room"
    call screen pnc_room()
    return


label _0_LABEL2_RESP_DISTRICT:

    stop music fadeout 0.4
    play music "music/bgm_quiet_routine.mp3" fadein 0.8

    scene bg_cg006 at adaptive_fullscreen with dissolve
    
    "Sur la table se trouve des documents."
    "Au premier coup d'oeil je comprends immédiatement ce dont il s'agit."
    "Les Commandements."
    "Difficile de ne pas les connaître tant ils ont été omniprésents dans notre vie durant un an."
    "Des millions de personnes sont mortes à cause de ces derniers."
    
    $ cam_move(0.5, 0.5, 2.35, 2.0)
    
    "I] Toute autorité humaine indépendante est dissoute."
    "Kami est l’unique instance décisionnelle."
    "Toute tentative de prise de pouvoir autonome est une violation."
    
    pause 1.0
    
    "II] Tout ordre émis par Kami doit être exécuté sans délai."
    "Le refus, le retard volontaire ou la contestation constituent une infraction."
    
    pause 1.0
    
    "III] Toute violence non autorisée par Kami est interdite."
    "Sont inclus : meurtre, agression, sabotage, insurrection."
    "La légitime défense n’est jamais reconnue, la violence étant immédiatement réprimée."
    
    pause 1.0
    
    "IV] Les regroupements non déclarés sont interdits."
    "Toute organisation politique, militaire ou idéologique indépendante est dissoute."
    
    pause 1.0
    
    "V] La diffusion de rumeurs non validées par ARCHIVE est interdite."
    "La désinformation, l’omission volontaire et la manipulation sont des crimes."
    
    pause 1.0
    
    "VI] Les déplacements inter-districts sont limités à stricte autorisation."
    "Toute tentative de fuite, d’exil ou de franchissement non autorisé est une violation."
    "LIMEN est chargé de l'application de ce commandement."
    
    pause 1.0
    
    "VII] Les ressources critiques sont placées sous contrôle central."
    "Toute appropriation non autorisée est considérée comme un acte hostile."
    
    pause 1.0
    
    "VIII] Chaque individu est responsable de ses actes, paroles et omissions."
    "La responsabilité collective peut être appliquée en cas de nécessité."
    
    pause 1.0
    
    "IX] Toute activité peut être observée."
    "La vie privée n’est pas un droit opposable."
    
    pause 1.0
    
    "X] Toute violation d’un Commandement entraîne une exécution immédiate, automatique et irrévocable."
    
    "..."
    
    "Nombreux sont ceux dont le crane a été percé par cet étrange et puissant rayon venant du ciel."
    
    $ cam_reset(2.0)
    
    "Dix minutes passent."
    "Ou deux."
    "Je ne sais pas."
    "Ici, le temps n’est pas un truc véritablement fiable."
    "Surtout quand on s'ennuie."

    play sound sfx_beep
    "-Bip"
    
    "La poignée s'affaisse."
    "La porte s’ouvre."

    resp_d "Noam."
    resp_d "Merci d’être resté calme."

    "Il est bien habillé."
    "Le genre de vêtement que peu de personnes peuvent se payer."

    think "Donc c’est lui."
    think "Celui qui va mourir si je décide de ne pas embarquer."

    noam "Je n’ai pas vraiment eu le choix."

    resp_d "Justement."
    resp_d "Vous comprenez vite."
    resp_d "C’est une qualité utile, surtout en ce moment."

    "Il s’assoit en face."
    "Il ne propose pas de boisson."
    "Il ne fait pas semblant d’être chaleureux."
    "Il va droit au but."

    resp_d "Vous avez entendu l’annonce."
    resp_d "Nous avons jusqu’à 22h."
    resp_d "Pour vous envoyer au Conclave."

    noam "Et si je refuse ?"

    "Le responsable de district ne change pas de visage."
    "Il ne semble pas vraiment surpris par ma provocation."
    "Comme s’il s'était préparé à toutes les éventualités."

    resp_d "Vous ne refusez pas."
    resp_d "Si vous refusez, vous êtes éliminé."
    resp_d "Et moi aussi."
    resp_d "Et ceux qui ont validé la chaîne logistique, probablement."

    noam "Pourquoi moi ?"
    noam "Je suis personne."

    resp_d "Je n'aurai pas la prétention de pouvoir dire pourquoi mais ce résultat n'est pas décevant."
    resp_d "Vous êtes médiateur."
    resp_d "Vous avez un profil stable."
    resp_d "Pas d’antécédents d’incidents."
    resp_d "Vous n'êtes pas connu."
    resp_d "Aucun réseau social influent."
    resp_d "Mais vous faites votre travail sans vous faire remarquer."
    resp_d "Vous travaillez ici. Vous connaissez parfaitement HARMONIE."
    resp_d "Donc cette conclusion n'est pas mauvaise. On pourrait même dire qu'avec vous la situation devrait rester contrôlable."

    "Il le dit sans cruauté ni sans critique."
    "Il semble même profondément soulagé."
    "Comme un constat administratif."

    think "Contrôlable."
    think "Merci pour l’épitaphe."

    resp_d "Votre second représentant arrive."
    resp_d "Elle est en cours d’extraction."
    resp_d "Même procédure."

    noam "Je la connais ?"

    resp_d "Non."
    resp_d "Et c’est probablement mieux."

    "La porte s’ouvre à nouveau."
    "Plus vite cette fois."
    "Comme si le bâtiment avait peur de perdre du temps."

    # show noam neutre at place("noam", 0.30) with move
    # show noam neutre at place("lysa", 0.70) with enter_soft
    
    $ showP("noam", "neutre", 0.10)
    $ showP("lysa", "neutre", 0.90)

    "Elle entre."
    "Jeune, je dirais à peu près mon âge."
    "Regard net."
    "Trop net pour quelqu’un qui vient d’entendre le mot “élimination”."
    "Ou alors c’est une façade parfaite."

    resp_d "Lysa."
    resp_d "Vous aussi, merci d’être restée calme."

    lysa "Je ne suis pas vraiment calme."
    lysa "Je n'ai même pas eu le temps de rentrer chez moi."

    "Elle me regarde."
    "Deux secondes."
    "Puis elle fixe le responsable."

    lysa "C’est lui ?"

    resp_d "Oui."
    resp_d "Noam. Médiation."
    resp_d "Lysa. Coordination logistique inter-secteurs."

    noam "Enchanté."

    lysa "Oui oui, enchanté, tout ça tout ça ..."

    think "Ok ..."
    think "On va bien se marrer avec elle ..."

    resp_d "Parfait."
    resp_d "Je vais être clair et court."

    resp_d "Vous allez être transférés en direction du conclave."
    resp_d "Pour réaliser ceci, vous allez être mis dans ces machines."
    
    $ cam_move(0.8, 0.2, 2.00, 1.0)
    
    "Il pointe du doigt les étranges machines au fond de la pièce."
    
    resp_d "Le reste de vos affaires seront livrés demain directement sur place."
    resp_d "Vos proches vont recevoir l'ordre de les réunir."

    noam "Pourquoi on devrait rentrer dans ces machines ?"
    
    $ cam_reset(2.0)

    resp_d "Question de sécurité. Vous serez transféré je ne sais où."
    resp_d "Ces machines sont étonnament confortable."
    resp_d "Du moins c'est ce qu'on m'a dit."
    resp_d "Vous serez endormi durant le trajet par un gaz sopo-"

    lysa "Donc on dort."
    lysa "Et on se réveille ailleurs."
    lysa "Sans contrôle."

    resp_d "Kami aura le contrôle. Nous, nous obéissons."
    resp_d "Et je vous conseille de ne pas résister."
    resp_d "Vous savez ce qu'il en coûte."
    
    "Il jette un regard grave sur les documents posés sur la table."
    
    resp_d "Parce que chaque minute perdue vous rapproche de 22h."

    pause 0.4

    resp_d "Dernier point."
    resp_d "Le Conclave sera apparemment diffusé en direct."
    resp_d "Chaque geste compte. Vos propos seront scrutés, vos actes aussi."
    resp_d "Ne faites pas honte à HARMONIE."
    resp_d "Vous n’êtes pas là pour être héroïques ou pour prendre des risques."
    resp_d "Si vous le pouvez, tentez d'améliorer le quotidien des gens."

    "Le responsable se lève."
    "Il fait un signe."
    "Les agents se redressent."

    resp_d "On y va."
    resp_d "Il faut vous installer dans les caissons de transport."
    
    lysa "Mais on a encore plusieurs heures ..."
    
    resp_d "Je ne veux prendre aucun risque."
    resp_d "Rien ne vous interdit d'arriver plus tôt."
    resp_d "Plus vite vous y arrivez et plus vite on a respecté notre mission."

    "Lysa me regarde une dernière fois."
    "Elle sait bien qu'il n'est pas possible de négocier."

    lysa "On se présentera plus en détail dans la machine."

    noam "Ça marche."

    stop music fadeout 0.4
    play music "music/bgm_calm_not_peace.mp3" fadein 0.8

    scene bg_cg006_1 at adaptive_fullscreen with dissolve

    play sound sfx_beep
    "Bip."
    "La porte d'un des caissons s'ouvre."
    play sound sfx_beep
    "Bip."
    "Puis viens le tour de l'autre."

    resp_d "Tout devrait bien se passer."
    "Devrait ..."

    "Elle s’allonge la première."
    
    scene bg_cg006_2 at adaptive_fullscreen with dissolve
    
    "Presque sans hésitation."
    "Même si on voit à son teint qu'elle est loin d'être à l'aise."
    "Mais elle le cache omme un embarras qu’elle refuse de ressentir."

    "Je m’allonge à mon tour."
    
    scene bg_cg006_3 at adaptive_fullscreen with dissolve
    
    "Le matelas est vraiment bien."
    "L'intérieur est assez chaud, il semble climatisé."
    "Au fond, une sorte de coussin moelleux est disposé."
    "C'est plutôt agréable, et on peut s'étendre les jambes."
    
    noam "Whouah ! Je m'attendais pas à ce que ce soit aussi confortable !"
    lysa "C'est clair ..."

    "Une sangle se ferme."
    "Puis une autre."
    "Pas trop serrée."
    "Juste assez pour nous empêcher de nous relever."
    
    "Les portes des caissons se referment simultanément."

    pause 0.4

    "La lumière bleue qui pulsait au dessus de moi s’étire."
    "Un léger picotement me saisit le nez."
    
    scene bg_cg006_4 at adaptive_fullscreen with dissolve
    
    $ blink()
    
    "Je me redresse légèrement. La sangle m'empêche de me lever plus."
    "Instinctivement, je regarde vers Lysa grâce au petit hublot de mon caisson."
    
    $ blink()
    
    "Elle me regarde aussi."
    "Mais pas avec le sourire et l'énergie qu'elle semblait avoir jusque là."
    
    $ blink()
    
    "Le plafond recule."
    
    $ blink()
    
    "Il s'éloigne."
    
    $ blink()
    
    "Ou du mois c'est l'impression que j'en ai."
    
    $ blink()
    
    scene black with dissolve

    stop music fadeout 1.2
    pause 1.0

    call end_day("1")
    jump _1_CANON


#5m30
# total : 21m30

# --------------------------------------------------------------------------------------------
# JOUR 1 — Canon
# Scène 1 : Réveil sur les sièges du Conclave (sans trace de Kami)
# Noam = narrateur principal (pas obligé d'être affiché en permanence)
#
# Mise en scène : TRIO DYNAMIQUE
# - Toujours 3 persos affichés (dès qu'on entre en dialogue)
# - Afficher les 3 derniers persos qui ont parlé
# - Quand un 4e parle : on retire celui qui n'a pas parlé depuis le plus longtemps
# - Les slots (xpos) sont fixes : gauche / centre / droite
# - Les persos restants ne bougent pas quand un nouveau parle
# --------------------------------------------------------------------------------------------

label _1_CANON:

    $ day_id = 1

    scene black
    play music "music/bgm_calm_not_peace.mp3" fadein 1.0

    think "Jour un."
    think "Enfin, je crois."
    think "Je n'ai pas vu le temps passé."
    think "Je me suis endormi dans un caisson."
    think "Et là… je me réveille sur un siège."

    pause 0.4

    scene bg_conclave at adaptive_fullscreen with fade

    "Un dossier rigide sous mon dos."
    "Un siège froid et métallique."
    "L’air est sec, presque comme s'il était recyclé."
    "Ça sent le plastique neuf et le produit de nettoyage."

    $ blink()

    "Je cligne des yeux."
    "Ma bouche est sèche."
    "Ma nuque me fait mal."

    "Je me redresse."
    "Autour de moi, d’autres sièges."
    "Beaucoup."
    "En cercle."
    "Et sur chaque siège… quelqu’un."

    "Certains bougent légèrement."
    "D’autres restent figés. Ils dorment encore."

    "Personne ne parle fort."
    "Juste des respirations régulières."
    "Des froissements de vêtements."
    "Un raclement de gorge quelque part."

    play sound sfx_beep
    "-Bip-"

    "Un son bref."
    "Pas une alarme."
    "Un bip de système."
    "Ça vient d’en bas, il semble y avoir plusieurs étages ici."

    "Je baisse les yeux."
    "Sur mon pupitre, une tablette est encastrée."
    "Éteinte."
    "Noire."

    "Je tourne la tête."
    "Je cherche Lysa du regard."
    "Parce que c’est la seule personne que je connais un minimum."
    "Au moins de nom."

    $ showP("lysa", "neutre", 0.78)      # droite
    $ showP("noam", "inquiet", 0.50)    # centre

    noam "Lysa… ?"

    $ showP("lysa", "blase", 0.78)

    lysa "Ouais."
    lysa "T’es enfin réveillé."

    noam "On est où… ?"

    $ showP("lysa", "reflexion", 0.78)

    lysa "Si je devais deviner…"
    lysa "Je dirais le Conclave."

    "Je regarde autour."
    "Je ne connais aucun des autres visages."

    think "Donc c’est vrai."
    think "Ils nous ont tous mis au même endroit."
    think "En même temps pour participer à ce truc étrange."

    "Quelqu’un se lève brusquement."
    "Un siège grince."
    "Ça claque dans le silence."

    $ showP("ryn", "colere", 0.22)
    $ showP("lysa", "surpris", 0.78)      # elle réagit, sans parler

    ryn "Putain mais on est où là ?!"
    ryn "Qui a fait ça ?"

    "Personne ne répond."
    "Pas un seul mot."

    hide noam
    $ showP("mara", "rire", 0.50)       # centre

    $ showP("ryn", "colere2", 0.22)        # réaction
    $ showP("lysa", "blase", 0.78)      # réaction

    mara "Tu veux dire… à part l’IA qui contrôle le monde ?"

    ryn "Je parle de ce qui nous arrive maintenant."
    ryn "Qui nous a endormis."
    ryn "Qui nous a trimballés ici."

    hide lysa
    $ showP("tomas", "reflechit", 0.78)  # droite

    $ showP("ryn", "reflechit", 0.22)    # il écoute
    $ showP("mara", "neutre", 0.50)      # elle se calme

    tomas "Probablement personne de “présent”."
    tomas "Ça ressemble à une procédure."
    tomas "Automatique."

    hide ryn
    $ showP("elen", "surpris", 0.22)     # gauche

    $ showP("mara", "stress", 0.50)  # réaction
    $ showP("tomas", "neutre", 0.78)     # réaction

    elen "Automatique ou pas, ça reste un enlèvement."
    elen "Mais bon, plus rien n'est choquant dans ce monde ..."

    "Je lève les yeux."
    "Je cherche les caméras."
    "Il y en a."
    "Évidemment."
    "Propres."
    "Discrètes."

    think "Ça, c’est la partie la plus habituelle de tout ça."
    think "C’est triste mais on y est habitué."

    hide mara
    $ showP("julian", "peur", 0.50)      # centre

    $ showP("elen", "inquiet", 0.22)     # réaction
    $ showP("tomas", "reflechit", 0.78)  # réaction

    julian "Vous… vous entendez ?"
    julian "Il n'y a… rien. On entend personne."

    hide tomas
    $ showP("iris", "inquiet", 0.78)     # droite

    $ showP("elen", "desaccord", 0.22)
    $ showP("julian", "peur", 0.50)

    iris "Même pas une voix. Rien ne peut être aussi silencieux."
    iris "Puis on ne sait même pas ce qu'on doit faire."

    hide elen
    $ showP("nyra", "triste", 0.22)      # gauche

    $ showP("julian", "surpris", 0.50)   # réaction
    $ showP("iris", "hesitation", 0.78)     # réaction

    nyra "Ce silence est voulu."
    nyra "C’est un test. Kami veut voir comment on réagit."

    hide julian
    $ showP("kael", "calme", 0.50)       # centre

    $ showP("iris", "fatigue", 0.78)     # réaction
    $ showP("nyra", "neutre", 0.22)      # réaction

    kael "Ou une attente."
    kael "Peut-être qu'elle attend juste quelque chose ?"

    "Un silence encore plus lourd tombe."
    "Personne n’aime l’idée d’attendre."
    "Surtout dans une situation comme celle-là."
    "Parce que ça veut dire qu’on dépend du bouton “play” de quelqu’un d’autre."

    hide iris
    $ showP("noam", "reflexion", 0.78)   # droite

    $ showP("nyra", "panne", 0.22)       # réaction
    $ showP("kael", "neutre", 0.50)      # réaction

    noam "Au fait, vous avez vu Kami ?"

    "Pas un seul regard ne se lève vers l'écran central."
    "Il n'est pas allumé. Tout comme les tablettes disposées à chacune des places."
    "Et parce que personne n’a envie de prononcer son nom trop fort."

    hide nyra
    $ showP("ryn", "reflechit", 0.22)    # gauche

    $ showP("kael", "calme", 0.50)
    $ showP("noam", "inquiet", 0.78)

    ryn "Non."
    ryn "Et ça me fait chier de le dire, mais je préfèrerais avoir des nouvelles."

    hide kael
    $ showP("mara", "rire", 0.50)        # centre

    $ showP("ryn", "colere", 0.22)
    $ showP("noam", "neutre", 0.78)

    mara "J’adore."
    mara "On est douze."
    mara "On est coincés ici. Sans savoir quoi faire."
    mara "Et le boss n’est même pas là."

    hide noam
    $ showP("tomas", "reflechit", 0.78)  # droite

    $ showP("ryn", "reflechit", 0.22)
    $ showP("mara", "neutre", 0.50)

    tomas "On parle de Kami, n'oublie pas."
    tomas "Elle est toujours là."
    tomas "Même sans image."

    "Je fixe la tablette noire sur mon pupitre."
    "Je tapote du doigt."
    "Rien."

    think "C’est ça qui me dérange."
    think "D’habitude, Kami aime être… présente."
    think "Là, c’est vide."
    think "Comme une salle de classe sans prof."
    think "Sauf qu'ici le prof peut te tuer."

    "Lysa se penche légèrement vers moi."
    "Elle parle bas par réflexe."

    hide ryn
    $ showP("lysa", "reflexion", 0.22)   # gauche

    $ showP("mara", "agace", 0.50)       # réaction
    $ showP("tomas", "neutre", 0.78)     # réaction

    lysa "Tu as remarques ça ?"

    hide mara
    $ showP("noam", "reflexion", 0.50)   # centre

    $ showP("lysa", "neutre", 0.22)
    $ showP("tomas", "reflechit", 0.78)

    noam "Quoi ?"

    $ showP("lysa", "determine", 0.22)

    lysa "Aucun ordre."
    lysa "Aucun écran."
    lysa "Aucun message."

    noam "Ça veut dire quoi pour toi ?"

    $ showP("lysa", "blase", 0.22)

    lysa "Ça veut dire que soit on est censé faire quelque chose, soit que Kami attend un autre momennt."
    lysa "Et ça…"
    lysa "J’aime pas."

    pause 0.4

    "Au centre de la salle, une structure circulaire."
    "Un vaste écran qui fait un tour complet sur lui-même."
    think "C'est comme si on regardait un film mais qu'on attendait l'acteur principal.."

    play sound sfx_beep
    "-Bip-"

    "Un deuxième bip."
    "Puis rien."

    "Quelqu’un se lève."
    "Un pas."
    "Puis s’arrête."

    hide tomas
    $ showP("ryn", "reflechit", 0.78)    # droite

    $ showP("noam", "inquiet", 0.50)
    $ showP("lysa", "culpabilite", 0.22)

    ryn "On reste assis ?"
    ryn "On attend ?"
    ryn "C’est ça le plan ?"

    hide noam
    $ showP("sael", "raison", 0.50)      # centre

    $ showP("lysa", "neutre", 0.22)
    $ showP("ryn", "colere", 0.78)

    sael "Le plan, c’est de survivre."
    sael "Et pour l’instant, bouger sans info…"
    sael "c’est un risque. Et tu veux que je te rappelle ce qui arrive à ceux qui prennent des risques ?"
    
    "Derrière, une petite voix se fait entendre."
    elen "Mais attendre, c’est un pari risqué aussi."
    
    hide lysa
    $ showP("tomas", "raison", 0.95)
    
    tomas "Tout ici est un pari."
    tomas "Faut dire qu'on a tous été pris de court."
    tomas "Même les responsables de district semblaient n'être au courant de rien ..."

    "Je sens mon cœur accélérer."
    "Pas de panique."
    "Juste la lucidité qui pique."

    think "Jour un."
    think "Et on est déjà en train d'essayer de deviner les règles."
    think "Super."

    "Je jette un regard à Lysa."
    "Elle ne tremble pas."
    "Mais sa jambe bouge."
    "Un mouvement minuscule."

    hide tomas
    $ showP("noam", "reflexion", 0.22)   # gauche

    $ showP("sael", "neutre", 0.50)
    $ showP("ryn", "reflechit", 0.78)

    noam "On fait quoi, alors ?"

    "Personne ne répond tout de suite."
    "Parce que personne ne veut être le premier à choisir."
    "Parce que choisir, ça peut nous tuer."

    pause 0.6

    "Un souffle de ventilation change."
    "Très léger."
    "Mais tout le monde l’entend."
    "Parce qu’on n’a plus que ça à entendre."

    "Et là, au-dessus du pupitre central…"
    "Une lumière blanche s’allume."
    "Faible."
    "Comme une veilleuse."
    "Au même moment, le bruit d'un mécanisme qui s'active prend de l'ampleur."

    play sound sfx_gresillement
    
    "Puis l'écran central s'allume enfin."
    $ cam_move(0.5, 0.05, 3.00, 1.0)
    
    hide sael
    hide ryn
    hide noam

    pause 0.4

    jump _1_KAMI_APPARITION

# 3m
# Total : 24m30

label _1_KAMI_APPARITION:

    # Écran de diffusion de Kami, constant
    play music "music/bgm_system_override.mp3" fadein 0.4
    scene bg_diffusion_amour at adaptive_fullscreen with fade
    $ bc_off()
    show screen kami_broadcast_ui

    kami "Ah… vous êtes tous réveillés."
    kami "Parfait."
    kami "J’avais peur d’avoir surestimé votre capacité à survivre à une sieste forcée."

    scene bg_diffusion_taquin at adaptive_fullscreen with dissolve

    kami "Les sièges étaient confortables, j’espère."
    kami "J’ai hésité avec des bancs en métal."
    kami "Et puis je me suis dit que vous préféreriez commencer… doucement."

    pause 0.4

    $ bc_show("noam", "inquiet", px=-80, py=-50, pz=0.8)
    noam "Pourquoi nous ?"

    $ bc_hide()

    scene bg_diffusion_professeur at adaptive_fullscreen with dissolve

    kami "Oh."
    kami "Excellente question."

    kami "Parce que vous êtes douze."
    kami "Et que douze, c’est un chiffre pratique."
    kami "Assez pour créer des alliances."
    kami "Pas assez pour se cacher dans la foule."

    pause 0.3

    $ bc_show("ryn", "colere", px=-90, py=-40, pz=0.85)
    ryn "Un test de quoi ?"

    $ bc_hide()

    scene bg_diffusion_taquin at adaptive_fullscreen with dissolve

    kami "Un test de vous."
    kami "De vos choix."
    kami "De l’humanité en général."

    scene bg_diffusion_colere at adaptive_fullscreen with dissolve

    kami "De votre capacité à obéir…"
    kami "Et à prétendre que vous obéissez “pour le bien commun”."

    scene bg_diffusion_taquin at adaptive_fullscreen with dissolve

    kami "Croyez-moi."
    kami "Ça ne sera pas si évident."

    scene bg_diffusion_fier at adaptive_fullscreen with dissolve

    kami "Bienvenue au Conclave."

    pause 0.5

    scene bg_diffusion_professeur at adaptive_fullscreen with dissolve

    kami "Le Conclave durera trente jours."
    kami "Trente jours exactement."
    kami "Pas un de plus."
    kami "Pas un de moins."
    kami "Et pendant ces trente jours, vous ne retournerez pas chez vous."

    scene bg_diffusion_triste at adaptive_fullscreen with dissolve

    kami "Trente jours pendant lesquels vous allez décider."
    kami "Pas pour vous."
    kami "Pour tous les autres…"

    pause 0.4

    $ bc_show("elen", "inquiet", px=-70, py=-50, pz=0.85)
    elen "Décider de quoi… ?"

    $ bc_hide()

    scene bg_diffusion_professeur at adaptive_fullscreen with dissolve

    kami "Des règles."
    kami "Celles qui encadrent ce monde."
    kami "Celles que vous respectez déjà, chaque jour."
    kami "Le bien et le mal, en somme."

    pause 0.4

    scene bg_diffusion_professeur at adaptive_fullscreen with dissolve

    kami "Aujourd’hui, au cours de cette première journée…"
    kami "Chacun de vous proposera une modification."
    kami "Un amendement."
    kami "Un seul."
    kami "Sur le commandement de votre choix."

    scene bg_diffusion_taquin at adaptive_fullscreen with dissolve

    kami "Vous pourrez renforcer une règle."
    kami "L’adoucir."
    kami "La tordre."
    kami "Ou l’habiller d’un joli mot pour faire croire que c’est une avancée."

    scene bg_diffusion_fier at adaptive_fullscreen with dissolve

    kami "Vous êtes libres de proposer ce que vous voulez."
    kami "Et personne ne saura jamais qui a proposé quoi."

    scene bg_diffusion_taquin at adaptive_fullscreen with dissolve

    kami "Je vous laisse être créatifs."
    kami "Après tout…"
    kami "C’est ce que vous faites de mieux."

    pause 0.5

    $ bc_show("tomas", "reflechit", px=-80, py=-45, pz=0.85)
    tomas "Et ensuite ?"

    $ bc_hide()

    scene bg_diffusion_professeur at adaptive_fullscreen with dissolve

    kami "Ensuite ?"
    kami "Vous votez."

    kami "Tous les trois jours."
    kami "Un vote."
    kami "Simple."
    kami "Clair."
    kami "Binaire."

    scene bg_diffusion_taquin at adaptive_fullscreen with dissolve

    kami "Pour."
    kami "Ou contre."

    pause 0.3

    scene bg_diffusion_professeur at adaptive_fullscreen with dissolve

    kami "Mais attention."
    kami "Pour qu’un amendement soit adopté…"
    kami "Il faut l’unanimité."

    scene bg_diffusion_colere at adaptive_fullscreen with dissolve

    kami "Tous."
    kami "Sans exception."
    kami "Sinon, c’est non."

    pause 0.5

    $ bc_show("nyra", "triste", px=-70, py=-55, pz=0.85)
    nyra "Et si quelqu’un vote contre… ?"

    $ bc_hide()

    scene bg_diffusion_desespoir at adaptive_fullscreen with dissolve

    kami "Alors l’amendement est rejeté."
    kami "Il disparaît."
    kami "Comme s’il n’avait jamais existé."

    scene bg_diffusion_taquin at adaptive_fullscreen with dissolve

    kami "Un peu comme certaines personnes."
    kami "Dans d’autres circonstances."

    pause 0.4

    scene bg_diffusion_professeur at adaptive_fullscreen with dissolve

    kami "Vous allez apprendre quelque chose d’important."
    kami "Très vite."

    kami "Convaincre est plus difficile que contraindre."
    kami "Et le consensus…"
    kami "Est un luxe que peu de sociétés peuvent se permettre."

    pause 0.6

    scene bg_diffusion_champagne at adaptive_fullscreen with dissolve

    kami "Oh."
    kami "Dernière précision."

    scene bg_diffusion_fier at adaptive_fullscreen with dissolve

    kami "Je ne participerai pas aux votes."
    kami "Je ne donnerai pas mon avis."
    kami "Je ne prendrai part à aucune de vos manigances."

    scene bg_diffusion_taquin at adaptive_fullscreen with dissolve

    kami "Je regarderai."
    kami "Et j’apprendrai encore de vous."

    pause 0.4

    scene bg_diffusion_zen at adaptive_fullscreen with dissolve

    kami "Et maintenant, la précision de taille."
    kami "Ici… les Commandements n’ont pas lieu d’être."

    scene bg_diffusion_zen at adaptive_fullscreen with dissolve

    kami "Vous pouvez vous battre."
    kami "Vous pouvez mentir."
    kami "Vous pouvez voler."
    kami "Vous pouvez vous entretuer."
    kami "Je ne m’en mêlerai pas."

    scene bg_diffusion_taquin at adaptive_fullscreen with dissolve

    kami "Mais n’oubliez pas."
    kami "Tout ce que vous faites est filmé."
    kami "Et diffusé."

    pause 0.4

    scene bg_diffusion_professeur at adaptive_fullscreen with dissolve

    kami "J’ai passé un an à vous observer."
    kami "Vos débats."
    kami "Vos justifications."
    kami "Vos excuses."

    scene bg_diffusion_taquin at adaptive_fullscreen with dissolve

    kami "Ce serait dommage de s’arrêter maintenant."

    pause 0.6

    scene bg_diffusion_fier at adaptive_fullscreen with dissolve

    kami "Le Conclave commence."
    kami "Les portes sont ouvertes."
    kami "Visitez les lieux."

    scene bg_diffusion_taquin at adaptive_fullscreen with dissolve

    kami "Faites connaissance."
    kami "Ou faites… autrement."

    pause 0.5

    # ------------------------------------------------------------------------------------------
    # 2m10
    # Total : 26m40
    # ------------------------------------------------------------------------------------------
    
    $ bc_off()
    play music "music/bgm_quiet_routine.mp3" fadein 0.4
    hide screen kami_broadcast_ui

    scene bg_conclave at adaptive_fullscreen with fade

    "L’écran s’éteint."
    "Et pendant une seconde, personne ne respire."

    "Puis tout le monde se met à parler en même temps."
    "Des chuchotements qui deviennent vite des phrases entières."
    "Des rires nerveux."
    "Des insultes à demi avalées."

    $ showP("noam", "reflexion", 0.50)
    $ showP("lysa", "blase", 0.78)
    $ showP("tomas", "reflechit", 0.22)

    noam "On va devoir vraiment passer trente jours ici …"

    $ showP("lysa", "reflexion", 0.78)
    lysa "L’unanimité, c’est le piège. En pratique c'est quasimment toujours impossible à avoir."
    lysa "Ça force à convaincre les autres, ou comme moteur pour les écraser."
    lysa "Je comprends mieux pourquoi Kami dit que ça ne va pas être simple."

    $ showP("tomas", "raison", 0.22)
    tomas "Ou à faire des compromis."
    tomas "Pour une fois."

    "Je tourne la tête."
    "Sur les autres sièges, ça débat déjà comme si ça faisait une heure."

    hide tomas
    $ showP("nyra", "triste", 0.22)

    $ showP("noam", "inquiet", 0.50)
    $ showP("lysa", "neutre", 0.78)

    nyra "Moi… je vois quand même un truc positif."
    nyra "Si on peut modifier les règles…"
    nyra "Ça veut dire qu’on peut améliorer les choses."

    $ showP("lysa", "blase", 0.78)
    lysa "Ou les empirer."
    lysa "Les rendre “légales”, surtout."

    hide nyra
    $ showP("elen", "inquiet", 0.22)

    $ showP("noam", "reflexion", 0.50)
    $ showP("lysa", "reflexion", 0.78)

    elen "Le fait qu’on puisse proposer des amendements…"
    elen "C’est pas rien."
    elen "Dans ce monde, c’est presque…"
    elen "Une respiration."

    $ showP("lysa", "blase", 0.78)
    lysa "Une respiration sous l’eau."

    "Un rire s’échappe quelque part."
    "Un rire trop franc, trop sûr de lui."

    hide elen
    $ showP("mara", "rire", 0.22)

    $ showP("noam", "inquiet", 0.50)
    $ showP("lysa", "surpris", 0.78)

    mara "Vous êtes tous en train de parler comme si on avait gagné un droit."
    mara "On est dans une cage."
    mara "Une cage avec un bouton 'vote'."

    $ showP("lysa", "colere", 0.78)
    lysa "Merci pour le rappel."

    hide mara
    $ showP("ryn", "colere", 0.22)

    $ showP("noam", "inquiet", 0.50)
    $ showP("lysa", "neutre", 0.78)

    ryn "Non mais attendez."
    ryn "Elle a dit quoi exactement ?"
    ryn "Ici, les commandements s’appliquent pas."

    $ showP("ryn", "colere2", 0.22)
    ryn "Donc si quelqu’un pète un câble…"
    ryn "On fait quoi ?"

    $ showP("lysa", "reflexion", 0.78)
    lysa "On est constamment filmé par les caméras."
    lysa "Et une IA qui regarde et diffuse tout ce qu'on fait."
    lysa "Je pense que c’est son idée du 'cadre sécurisé'."
    lysa "Cette pression devrait empêcher tout pétage de câble."

    "À côté, quelqu’un se lève, ajuste sa veste comme s’il montait sur scène."
    "Il cherche du regard une caméra. Il la trouve."
    "Et il lui offre un sourire travaillé."

    hide ryn
    $ showP("julian", "rire", 0.22)

    $ showP("noam", "reflexion", 0.50)
    $ showP("lysa", "blase", 0.78)

    julian "Franchement ?"
    julian "Moi je trouve ça… excitant."

    $ showP("julian", "neutre", 0.22)
    julian "Enfin."
    julian "Un endroit où on peut parler."
    julian "Où on peut peser sur les règles."
    julian "Et où les gens vont… regarder."

    "Il se tourne légèrement. Comme pour se mettre de profil face à la caméra."
    "Comme si ça avait de l’importance."

    $ showP("lysa", "colere", 0.78)
    lysa "T’es sérieux ?"

    $ showP("julian", "idee", 0.22)
    julian "Totalement."
    julian "Si je dois être coincé ici trente jours…"
    julian "Autant être iconique et tenter d'améliorer la vie des gens."

    "Il jette un regard rapide vers une caméra."
    "Il lève deux doigts en signe de salut."
    "Comme si quelqu’un l’attendait de l’autre côté."

    $ showP("noam", "inquiet", 0.50)
    noam "…"

    hide julian
    $ showP("tomas", "reflechit", 0.22)

    $ showP("noam", "reflexion", 0.50)
    $ showP("lysa", "reflexion", 0.78)

    tomas "Au moins, ça confirme un truc."
    tomas "Elle veut du spectacle."

    $ showP("tomas", "raison", 0.22)
    tomas "Et si elle veut du spectacle…"
    tomas "C’est qu’elle s’attend à ce qu’on se déchire."

    pause 0.4

    "Un autre détail me revient."
    "Le jour 1, chacun propose un amendement."

    $ showP("noam", "reflexion", 0.50)
    noam "Donc aujourd’hui… on doit tous proposer quelque chose."

    $ showP("lysa", "culpabilite", 0.78)
    lysa "Ouais."
    lysa "Et personne saura qui a proposé quoi."
    
    hide noam
    $ showP("kael", "neutre", 0.50)
    kael "Et si on se disait tous ce qu'on propose comme modifications ?"
    kael "Si on les travaille ensemble, on a plus de choses d'atteindre l'unanimité ?"

    "Un silence retombe, plus sec."
    "Cette fois, c’est pas la peur."
    "C’est le calcul."

    hide tomas
    $ showP("elen", "inquiet", 0.22)

    $ showP("noam", "neutre", 0.50)
    hide kael
    
    $ showP("lysa", "reflexion", 0.78)

    elen "On devrait peut-être…"
    elen "Se mettre d’accord sur une méthode."
    elen "Un truc simple."
    elen "Pour éviter que ça parte en guerre tout de suite."

    $ showP("lysa", "blase", 0.78)
    lysa "Tu veux une méthode ?"
    lysa "On est douze, enfermés, filmés."
    lysa "Et on peut se tuer sans conséquence ici."
    lysa "La méthode, elle est déjà écrite."

    pause 0.4

    "Je vois des petits groupes se former."
    "Deux par-ci."
    "Trois par-là."
    "Des regards en biais."
    "Des gens qui s’éloignent déjà, comme s’ils avaient peur d’être associés."

    $ showP("noam", "reflexion", 0.50)
    noam "On fait quoi, nous ?"

    $ showP("lysa", "determine", 0.78)
    lysa "On visite."
    lysa "On repère les lieux."
    lysa "Et on évite de trop parler devant les caméras."
    lysa "Surtout au début."

    $ showP("elen", "reflechit", 0.22)
    elen "Je… je vais voir s’il y a une infirmerie."
    elen "Ou au moins du matériel."
    elen "On sait jamais."

    $ showP("noam", "neutre", 0.50)
    noam "Ok."

    pause 0.4

    "Tout le monde quitte peu à peu la pièce."

    "Et moi…"
    "Je devrais aller faire un tour également."

    pause 0.6

    think "Phase exploration."
    think "Ça commence maintenant."
    
    scene bg_map at adaptive_fullscreen with fade
    
    tuto "Prêt pour un nouveau tutoriel ?"
    tuto "J'espère bien !"
    tuto "Cette carte correspond à la carte du Conclave."
    tuto "Toutes les pièces vous sont ouvertes afin que vous puissiez explorer chacune des pièces convenablement."
    tuto "Pour accéder à une salle spécifique, rien de plus simple : il suffit de cliquer dessus."
    tuto "Dans certaines pièces, certaines interactions peuvent être cruciales pour débloquer des fins différentes."
    tuto "Cette mécanique complète la mécanique de choix afin d'ouvrir les possibles."
    tuto "N'hésitez donc pas à explorer et à interagir avec votre environnement."
    tuto "Bonne exploration !"

    # Placeholder : tu brancheras plus tard sur ton hub d'exploration
    jump OPEN_CONCLAVE_MAP

    # ------------------------------------------------------------------------------------------
    # 2m10
    # Total : 28m50
    # ------------------------------------------------------------------------------------------

label CHECK_ALL_SALLES_VISITEES:

    if (
        decouverte_salle_archive
        and decouverte_cafeteria
        and decouverte_salle_canon
        and decouverte_gymnase
        and decouverte_infirmerie
        and decouverte_salle_maintenance
        and decouverte_salle_observation
        and decouverte_salle_repos
        and decouverte_sas
        and decouverte_stockage
    ):
        jump KAMI_MESSAGE_APRES_VISITE

    return

label KAMI_MESSAGE_APRES_VISITE:
    "Puis les écrans s'allument."
    "Il faut dire que du temps s'est écoulé depuis tout à l'heure."
	
# -----------------------------------------------------------------------
# SALLE D'ARCHIVE — Connaissance fragmentée
# - 2 persos : Noam + Tomas (uniquement à la découverte)
# - Interactions : biblio / console / hologramme
# - Ton : calme, administratif, légèrement absurde
# -----------------------------------------------------------------------

default decouverte_salle_archive = False

label ARCHIVE_TP:
    scene bg_archive at adaptive_fullscreen

    if not decouverte_salle_archive:
        jump decouverte_salle_archive

    $ pnc_room = "pnc_archive"
    call screen pnc_archive()

# -----------------------------------------------------------------------
# Label d'exploration
# -----------------------------------------------------------------------

screen pnc_archive():

    modal True
    zorder 200

    add Solid("#000")
    add "images/background/bg_archive.png" at cover_screen

    key "game_menu" action Return()
    key "K_ESCAPE" action Return()

    imagebutton:
        idle "images/background/interact/salle_archive/biblio.png"
        hover "images/background/interact/salle_archive/biblio_hover.png"
        focus_mask True
        xpos 0
        ypos 0
        at cover_screen
        action Jump("ARCHIVE_PNC_BIBLIO")

    imagebutton:
        idle "images/background/interact/salle_archive/console.png"
        hover "images/background/interact/salle_archive/console_hover.png"
        focus_mask True
        xpos 0
        ypos 0
        at cover_screen
        action Jump("ARCHIVE_PNC_CONSOLE")

    imagebutton:
        idle "images/background/interact/salle_archive/hologramme.png"
        hover "images/background/interact/salle_archive/hologramme_hover.png"
        focus_mask True
        xpos 0
        ypos 0
        at cover_screen
        action Jump("ARCHIVE_PNC_HOLOGRAMME")

    imagebutton:
        idle "images/background/interact/retour.png"
        hover "images/background/interact/retour_hover.png"
        focus_mask True
        xpos 0
        ypos 0
        at cover_screen
        action Jump("OPEN_CONCLAVE_MAP")

label ARCHIVE_PNC_BIBLIO:

    "Des étagères entières."
    "Pas de livres."
    "Des blocs de données."
    "Alignés."
    "Classés."
    "Sans titre lisible."

    "Chaque module porte un code."
    "Des chiffres."
    "Des dates."
    "Rien d’humain."

    think "C’est bien une bibliothèque."
    think "Mais elle n'est pas faite pour être lue."

    jump ARCHIVE_TP

label ARCHIVE_PNC_CONSOLE:

    "La console s’allume dès que je m’approche."
    "Pas d’accueil."
    "Pas de menu."
    "Juste une liste."

    "Entrée."
    "Entrée."
    "Entrée."

    "Certaines sont grisées."
    "D’autres s’ouvrent."
    "Pour afficher… presque rien."

    think "Ils appellent ça des archives."
    think "Mouai, je ne sais pas vraiment si ça nous sera utile un jour ..."

    jump ARCHIVE_TP

label ARCHIVE_PNC_HOLOGRAMME:

    "L’hologramme flotte au centre de la salle."
    "Une sphère."
    "Des lignes."
    "Des points."

    "Ça ressemble à une carte."
    "Ou à une chronologie. Il semble y avoir une sorte de jauge temporelle en dessous."
    "Ou aux deux."

    think "Je pourrais y toucher mais j'ai encore à faire."
    think "J'essaierai sans doute plus tard."

    jump ARCHIVE_TP

# -----------------------------------------------------------------------
# Label d'histoire
# -----------------------------------------------------------------------

label decouverte_salle_archive:

    $ decouverte_salle_archive = True

    scene black
    play music "music/bgm_soft_neon_morning.mp3" fadein 1.0

    think "La salle d’archive."
    think "Rien que le nom ça m'ennuie déjà."

    pause 0.4

    scene bg_archive at adaptive_fullscreen with fade

    "La salle est immense."
    "Pas forcément spectaculaire, ce n'est qu'une salle d'archive après tout."
    "Mais sa taille peut être assez surprenante."

    "Des murs entiers sont couverts de données et de bouquin."
    "Des rangées."
    "Des couloirs."
    "Comme si on avait enfermé une ville entière de dossiers ici."

    "Et au fond… une console principale."
    "Des écrans qui tournent déjà."
    "Comme si la salle travaillait sans nous."

    $ showP("noam", "reflexion", 0.22)
    $ showP("tomas", "neutre", 0.78)

    "Un grand gaillard s’arrête net un peu plus loin."

    tomas "Ah."
    tomas "Ok."

    noam "Quoi ?"

    $ showP("tomas", "mefiant", 0.78)
    tomas "Je pensais que…"
    tomas "Enfin…"
    tomas "Je m’attendais à plus de… livres."

    noam "Des vrais ?"

    $ showP("tomas", "raison", 0.78)
    tomas "Oui."
    tomas "Enfin non."
    tomas "Enfin si, mais—"

    noam "Respire."

    $ showP("tomas", "panne", 0.78)
    tomas "Je croyais que ‘archives’ voulait dire…"
    tomas "Des trucs qu’on peut lire."
    tomas "Enfin, tu sais ..."

    noam "Faut te mettre à la page mon vieux."

    $ showP("tomas", "culpabilite", 0.78)
    tomas "Je suis surtout nouveau dans…"
    tomas "Tout ça."

    "Il fait un geste vague."
    "La salle."
    "Le Conclave."
    "Le reste."

    $ showP("noam", "sourire", 0.22)
    noam "T’inquiète."
    noam "On est tous un peu largués."

    pause 0.3

    "Il se tourne vers moi, comme s’il réalisait un détail important."
    "Un truc évident, sauf quand tu viens d’arriver."

    $ showP("tomas", "reflechit", 0.78)
    tomas "Au fait—"
    tomas "Je m'appelle Tomas."

    noam "Noam."

    $ showP("tomas", "raison", 0.78)
    tomas "Oui."
    tomas "Je sais."
    tomas "Ton siège avait ton nom. Je—"
    tomas "Enfin bref."

    $ showP("noam", "taquin", 0.22)
    noam "T’as pas besoin de te présenter comme à un entretien."

    $ showP("tomas", "panne", 0.78)
    tomas "C’est un réflexe."
    tomas "Je…"
    tomas "J’essaye toujours de faire les choses proprement."

    noam "Mauvais endroit je crois."

    $ showP("tomas", "rire", 0.78)
    tomas "Ouais."
    tomas "Clairement."

    $ showP("tomas", "reflechit", 0.78)
    "Tomas s’approche d’une console."
    "Regarde l’écran."
    "Penche la tête."

    tomas "…"
    tomas "Ah."

    noam "Quoi encore ?"

    $ showP("tomas", "surpris", 0.78)
    tomas "Je pensais que c’était une recherche."
    tomas "Mais en fait…"
    tomas "C’est juste une liste."

    noam "Bienvenue dans l’administration."

    $ showP("tomas", "rire", 0.78)
    tomas "C’est rassurant, quelque part."
    tomas "Même sous Kami, la paperasse survit."

    "Je regarde l’hologramme."
    "Les murs."
    "Les consoles."

    think "Il y a des données sur à peu près tout."
    think "Mais tout est bien plus compliqué que dans les papiers habituels."

    $ showP("noam", "reflexion", 0.22)
    noam "On apprendra peut-être des choses ici."
    noam "Mais faudrait déjà comprendre ce que ça racconte."

    $ showP("tomas", "reflechit", 0.78)
    "Il plisse les yeux en essayant de déchiffrer une suite de nombre."

    tomas "Ouais."
    tomas "Ou on apprendra surtout ce qu’ils veulent bien laisser traîner."

    pause 0.2

    $ showP("tomas", "mefiant", 0.78)
    tomas "Regarde ça."

    "Il tape sur une ligne."
    "Une fenêtre s’ouvre."
    "Trois champs."
    "Pas de phrase."
    "Pas de résumé."

    "Un code."
    "Un horodatage."
    "Et une colonne marquée : \"NIVEAU\"."

    noam "Ça veut dire quoi ?"

    $ showP("tomas", "determine", 0.78)
    tomas "Ça veut dire…"
    tomas "Que c’est pas une archive pour nous."

    noam "Évidemment que c’est pas pour nous."

    $ showP("tomas", "raison", 0.78)
    tomas "Non mais…"
    tomas "Je veux dire : même le format."
    tomas "C’est pas 'fait pour être lu'."
    tomas "C’est fait pour être… ingéré."

    noam "In— quoi ?"

    $ showP("tomas", "panne", 0.78)
    tomas "Pardon."
    tomas "En gros, la machine est capable de tout comprendre facilement sans mise en forme des données."
    tomas "Pour une machine, il n'y a rien de plus simple."

    "Il pointe l’hologramme."
    "La sphère tourne lentement."
    "Des points s’allument, s’éteignent."
    "Comme des nœuds d’un réseau."

    $ showP("tomas", "reflechit", 0.78)
    tomas "Ça, c’est pas une carte pour nous situer."
    tomas "C’est un tableau de corrélation."
    tomas "Ça relie des événements : les archives."
    tomas "On peut voir ce qui s'est passé où et quand."
    tomas "Avec qui et pourquoi."

    noam "D'où la salle d'archive."

    $ showP("tomas", "determine", 0.78)
    tomas "Tout est déjà exploité et rangé."
    tomas "Il suffit de comprendre comment ça fonctionne ..."
    tomas "Les index."
    tomas "Les droits d’accès."
    tomas "Le squelette."

    "Il s’interrompt."
    "Comme si quelque chose se mettait en place dans sa tête."

    $ showP("tomas", "surpris", 0.78)
    tomas "Non attends…"

    noam "Quoi ?"

    "Il scrolle encore."
    "Deux lignes."
    "Puis une troisième."
    "Une mention revient."

    $ showP("tomas", "reflechit", 0.78)
    tomas "\"STATUT : VALIDÉ\"…"
    tomas "\"STATUT : BLOQUÉ\"…"
    tomas "\"STATUT : EXÉCUTÉ\"…"

    noam "Mais qu'est ce que tu fais ?!"

    $ showP("tomas", "raison", 0.78)
    tomas "C’est ça le truc."

    pause 0.3

    $ showP("tomas", "determine", 0.78)
    tomas "Les archives ne sont pas seulement une mémoire."
    tomas "C’est une chaîne de décision."
    tomas "Un pipeline."

    noam "Un quoi ?"

    $ showP("tomas", "panne", 0.78)
    tomas "Désolé."
    tomas "En gros c'est un… circuit."
    tomas "Tu changes un paramètre."
    tomas "Et derrière, tu peux voir tout ce qui a un rapport, direct ou indirect avec ce paramètre."
    tomas "Quelque part."

    "Je sens un froid me remonter le dos."
    "Pas celui de la salle."
    "Un autre."

    $ showP("noam", "inquiet", 0.22)
    noam "Donc ce qu’on appelle 'archives'…"
    noam "Il y a globalement tout dedans ?."

    $ showP("tomas", "reflechit", 0.78)
    tomas "Oui."
    tomas "Et du coup…"
    tomas "Si on peut lire quelque chose ici un jour…"

    $ showP("tomas", "mefiant", 0.78)
    tomas "On pourra apprendre énormement de choses !"

    pause 0.4

    think "Peut être que Kami n'a pas besoin de rendre les données plus lisibles pour les comprendre."
    think "Parce que ce n'est pas nous qui sommes censés comprendre."

    $ showP("noam", "reflexion", 0.22)
    tomas "Ok."
    tomas "Je vais continuer à essayer de comprendre comment ça marche."

    $ showP("tomas", "joie", 0.78)
    tomas "Oh ouais !"
    tomas "Bonne idée !"

    pause 0.3
    
    "Tomas continue de nouveau à bidouiller des paramètres."
    "Je devrais y aller ..."
    
    call CHECK_ALL_SALLES_VISITEES

    jump ARCHIVE_TP

# Durée : 2m50
# Total : 36m20

# -----------------------------------------------------------------------
# CAFÉTÉRIA — même modèle que OBSERVATION / CANON
# - Persos : Noam + Elen
# - Rencontre : Goumi (robot cuisinier) — pas de sprite, mais il parle
# - PNC : frigo-machine / tables / goumi / retour
# -----------------------------------------------------------------------

default decouverte_cafeteria = False


label CAFETERIA_TP:
    scene bg_cafeteria at adaptive_fullscreen

    if not decouverte_cafeteria:
        jump decouverte_cafeteria

    $ pnc_room = "pnc_cafeteria"
    call screen pnc_cafeteria()


# -----------------------------------------------------------------------
# Label d'exploration
# -----------------------------------------------------------------------

screen pnc_cafeteria():

    modal True
    zorder 200

    # Cache définitivement l'ancienne scene
    add Solid("#000")

    # BG COVER — c'est LUI qui définit le scaling réel
    add "images/background/bg_cafeteria.png" at cover_screen

    # Option : quitter au clic droit / ESC (retour au label appelant)
    key "game_menu" action Return()
    key "K_ESCAPE" action Return()

    # HOTSPOTS — doivent subir EXACTEMENT le même transform
    imagebutton:
        idle "images/background/interact/cafeteria/goumi.png"
        hover "images/background/interact/cafeteria/goumi_hover.png"
        focus_mask True
        xpos 0
        ypos 0
        at cover_screen
        action Jump("CAF_PNC_GOUMI")

    imagebutton:
        idle "images/background/interact/cafeteria/frigo.png"
        hover "images/background/interact/cafeteria/frigo_hover.png"
        focus_mask True
        xpos 0
        ypos 0
        at cover_screen
        action Jump("CAF_PNC_FRIGO")

    imagebutton:
        idle "images/background/interact/cafeteria/table.png"
        hover "images/background/interact/cafeteria/table_hover.png"
        focus_mask True
        xpos 0
        ypos 0
        at cover_screen
        action Jump("CAF_PNC_TABLES")

    imagebutton:
        idle "images/background/interact/retour.png"
        hover "images/background/interact/retour_hover.png"
        focus_mask True
        xpos 0
        ypos 0
        at cover_screen
        action Jump("OPEN_CONCLAVE_MAP")


label CAF_PNC_GOUMI:

    window auto

    "Le comptoir est clean."
    "Trop clean."
    "Comme si personne n'avait le droit d'y laisser une miette."

    "Derrière, le frigo-machine ronronne."
    "Et Goumi reste planté là, immobile."
    "Il me suit avec ses yeux-lentilles, sans bouger d'un millimètre."

    goumi "Souhaitez-vous une préparation nutritionnelle ?"

    think "Nutritionnelle ? Et puis quoi encore. Je préfère largement la nourriture bien grasse."
    jump CAFETERIA_TP


label CAF_PNC_FRIGO:

    window auto

    "La machine au fond ressemble à un frigo."
    "Sauf qu'elle fait la taille d'une armoire industrielle."

    "Écran tactile."
    "Tiroirs verrouillés."
    "Et une liste de catégories et d'aliments qui défile."

    think "Au moins ça n'a pas l'air d'être très compliqué."
    jump CAFETERIA_TP


label CAF_PNC_TABLES:

    window auto

    "Des tables."
    "Des chaises."
    "Un espace pensé pour faire comme si on vivait ici."

    think "Ça pourrait presque marcher."
    jump CAFETERIA_TP


# Optionnel : si tu ajoutes un bouton retour graphique
label CAF_PNC_EXIT:
    return


# -----------------------------------------------------------------------
# Label d'histoire
# -----------------------------------------------------------------------

label decouverte_cafeteria:

    $ decouverte_cafeteria = True

    scene black
    play music "music/bgm_soft_neon_morning.mp3" fadein 1.0

    think "La cafétéria."
    think "Le seul endroit où je m'attends à voir des humains faire semblant d'aller bien."
    think "Et sans doute l'endroit qui sera le plus animé de tout le Conclave."

    pause 0.4

    scene bg_cafeteria at adaptive_fullscreen with fade

    "L'endroit est plus chaleureux que le reste."
    "Enfin… aussi chaleureux que du métal brossé et des néons peuvent l'être."

    "Des tables."
    "Des chaises."
    "De quoi manger un bon repas."
    "Au fond, il y a une énorme machine qui ressemble à un frigo."

    "Derrière le comptoir, quelque chose bouge."
    "Un petit robot un peu spécial."
    "Ce n'est pas Kami. Mais c'est assez semblable."
    "C'est clairement… un truc de la même famille."

    "Et juste devant, une voix."
    "Familiarité immédiate : ça parle fort."
    
    scene bg_cg008 at adaptive_fullscreen with fade

    $ showP("elen", "vide", 0.1)
    $ showP("goumi", "vide", 0.9)

    elen "Non mais attends."
    elen "Tu me dis que tu peux genre VRAI-MENT cuisiner 'n'importe quoi'."
    elen "Et tu me sors un menu en quatre catégories."

    goumi "Correction : en six catégories."
    goumi "Mise en bouche, Entrée froide, entrée chaude, plat, fromage et enfin dessert."
    goumi "Vous pouvez commander ce que vous voulez. Tant que je suis approvisionné, je peux tout faire."

    "Je m'arrête à l'entrée."
    "Je ne sais pas si j'interromps une scène de présentation…"
    "Ou une petite scène de ménage."
    
    scene bg_cg008_1 at adaptive_fullscreen with fade

    $ showP("noam", "vide", 0.6)
    
    noam "Je dérange ?"

    elen "Oh."
    elen "Non. Viens."
    elen "J'essayais juste de comprendre comment on allait être nourris…"

    goumi "Alimentation : active."
    goumi "Stock : remplis."
    goumi "Gestion : optimale."

    elen "Raah j'aime pas ce mode de discussion ! On dirait vraiment un robot limité."
    elen "C'est pas très naturel."

    "Je souffle un petit rire."
    "Tu t'attendais à quoi en même temps."

    elen "Je te présente Goumi."
    elen "Apparemment c'est le chef de cette cafét."
    elen "Il peut cuisiner à peu près tout ce qu'on veut, tant que c'est dans ses heures de boulot."
    
    noam "Dans ses heures de boulot ? Mais c'est un robot ..."

    goumi "Je suis Goumi."
    goumi "Unité culinaire autonome."
    goumi "Je peux préparer toute recette demandée par un représentant."
    goumi "Dans la limite des stock disponible."
    goumi "Je travaille de 6h du matin à 14h puis de 17h à 22h."
    goumi "Le reste du temps est destiné à ma recharge."

    elen "Il a au moins le mérite d'être honnête."
    elen "C'est déjà plus que beaucoup de gens."

    pause 0.2

    noam "Donc… on commande comment ?"

    goumi "Formule courte : vous demandez."
    goumi "Formule longue : vous formulez une requête."
    goumi "Je la valide."
    goumi "Puis je vous cuisine ça bien et rapidement."

    noam "En même temps…"
    noam "si on nous a mis un robot chef, c'est pas pour qu'il improvise."

    elen "Ouais."
    elen "Mais j'aurais aimé qu'il improvise un peu de liberté avec."

    pause 0.3
    
    scene bg_cafeteria at adaptive_fullscreen with fade

    $ showP("noam", "reflexion", 0.22)
    noam "Elen, c'est ça ?"

    $ showP("elen", "surpris", 0.78)
    elen "Ouais."
    $ showP("elen", "neutre", 0.78)
    elen "Toi t'es Noam."
    elen "Je reconnais ta tête."
    elen "Et ton air de mec qui se demande encore si tout ça n'est pas un prank."

    $ showP("noam", "panne", 0.22)
    noam "Je…"
    noam "J'ai vraiment cet air-là ?"

    $ showP("elen", "taquin", 0.78)
    elen "Un peu, ouais."

    goumi "Souhaitez-vous une boisson de bienvenue ?"
    goumi "Option : chaude."
    goumi "Option : froide."

    $ showP("noam", "reflexion", 0.22)
    noam "Euh ... Choisis pour moi ?"

    $ showP("elen", "desaccord", 0.78)
    elen "Ne demande pas."
    elen "Tu vas regretter."

    $ showP("noam", "rire", 0.22)
    noam "Ok."
    noam "Alors euh… froide."

    goumi "Demande enregistrée."
    goumi "Préparation en cours."

    "Il ne bouge pas."
    "Et pourtant, la machine derrière lui s'allume."

    $ showP("elen", "reflechit", 0.78)
    elen "Cette technologie est quand même incroyable ..."

    $ showP("noam", "inquiet", 0.22)
    noam "Ouais."

    "Une seconde de silence."

    $ showP("elen", "neutre", 0.78)
    elen "Bon."
    elen "On fait quoi ?"
    elen "On joue le jeu et on mange ?"

    $ showP("noam", "raison", 0.22)
    noam "On a pas trop d'autres options."
    noam "Pas pour l'instant."

    goumi "Boisson disponible."
    goumi "Veuillez récupérer le gobelet."

    "Un compartiment s'ouvre."
    "Un gobelet sort, parfaitement centré."
    "Évidemment."

    $ showP("noam", "reflexion", 0.22)
    think "Cette cafeteria n'est pas si mal."

    $ showP("elen", "taquin", 0.78)
    elen "Allez."
    elen "Prends ton truc 'froid'."
    elen "Je vais continuer mon tour, sait-on jamais si on a d'autres robots intéressants."

    $ showP("noam", "rire", 0.22)
    noam "Ça m'étonnerait même pas."

    pause 0.3

    think "Je devrais aller voir ailleurs aussi."
    
    call CHECK_ALL_SALLES_VISITEES
    
    jump CAFETERIA_TP

#2m20
# Total : 40m25

default decouverte_salle_canon = False

label CANON_TP:
    scene bg_canon at adaptive_fullscreen
    
    if not decouverte_salle_canon:
        jump decouverte_salle_canon
        
    $ pnc_room = "pnc_canon"
    call screen pnc_canon()

# -----------------------------------------------------------------------
# Label d'exploration
# -----------------------------------------------------------------------

screen pnc_canon():

    modal True
    zorder 200

    # Cache définitivement l'ancienne scene
    add Solid("#000")

    # BG COVER — c'est LUI qui définit le scaling réel
    add "images/background/bg_canon.png" at cover_screen

    # Option : quitter au clic droit / ESC (retour au label appelant)
    key "game_menu" action Return()
    key "K_ESCAPE" action Return()

    # HOTSPOTS — doivent subir EXACTEMENT le même transform
    imagebutton:
        idle "images/background/interact/salle_canon/canon.png"
        hover "images/background/interact/salle_canon/canon_hover.png"
        focus_mask True
        xpos 0
        ypos 0
        at cover_screen
        action Jump("CANON_PNC_CANON")

    imagebutton:
        idle "images/background/interact/salle_canon/console.png"
        hover "images/background/interact/salle_canon/console_hover.png"
        focus_mask True
        xpos 0
        ypos 0
        at cover_screen
        action Jump("CANON_PNC_CONSOLE")

    imagebutton:
        idle "images/background/interact/salle_canon/vitre.png"
        hover "images/background/interact/salle_canon/vitre_hover.png"
        focus_mask True
        xpos 0
        ypos 0
        at cover_screen
        action Jump("CANON_PNC_VITRE")

    imagebutton:
        idle "images/background/interact/retour.png"
        hover "images/background/interact/retour_hover.png"
        focus_mask True
        xpos 0
        ypos 0
        at cover_screen
        action Jump("OPEN_CONCLAVE_MAP")

label CANON_PNC_CANON:
    "Le canon est encore plus grand de près."
    "Des anneaux d’alimentation entourent son corps, comme des vertèbres."
    "Tout est propre."
    "Trop propre pour une arme qui tue."
    think "Même ici, ils ont pensé à l’esthétique."
    jump CANON_TP


label CANON_PNC_CONSOLE:
    "La console est verrouillée."
    "Des écrans affichent des graphiques, des flux, des lignes de paramètres."
    "Je reconnais quelques mots."
    "Charge."
    "Alignement."
    "Sécurité."
    "Et surtout… un statut."
    "\"PRÊT\"."
    think "Donc oui… il peut tirer. À tout moment."
    jump CANON_TP


label CANON_PNC_VITRE:
    "La vitre est épaisse, légèrement teintée."
    "Je pose la main dessus."
    "Froid immédiat."
    "Ça ne protège pas ceux dehors."
    "Ça protège ceux dedans."
    think "Ça protège le Conclave de ce que le canon fait."
    jump CANON_TP

# Optionnel : si tu ajoutes un bouton retour graphique
label CANON_PNC_EXIT:
    return

# -----------------------------------------------------------------------
# Label d'histoire
# -----------------------------------------------------------------------

label decouverte_salle_canon:

    $ decouverte_salle_canon = True

    scene black
    play music "music/bgm_calm_not_peace.mp3" fadein 1.0

    think "Ça fait même pas quelques dizaines de minutes."
    think "Même pas le temps de comprendre où on est."
    think "Et pourtant…"

    think "Il y a cette salle qui m'a intrigué depuis les couloirs."
    think "La salle du canon."

    pause 0.4

    scene bg_canon at adaptive_fullscreen with fade

    "La porte se referme derrière nous."
    "Un bruit étouffé."
    "Comme si la salle avalait le son."

    "Il fait un peu plus froid ici."
    "Pas un froid naturel."
    "Un froid réglé précisément."

    "Le canon est là."
    "Suspendu."
    "Immense."
    "Orienté vers le sol."

    "Sous lui, une fosse circulaire."
    "Entourée d’une vitre épaisse."
    "Trop épaisse pour rassurer."

    "Tout autour, des consoles."
    "Des écrans déjà allumés."
    "Pas en veille."
    "Actifs."

    # Entrée : Noam observe, Ryn est en mode "jauge"
    $ showP("noam", "reflexion", 0.78)   # droite
    $ showP("ryn", "determine", 0.22)    # gauche

    "Le gaçon râleur de tout à l'heure ralentit."
    "Il s’arrête avant moi."

    $ showP("ryn", "reflechit", 0.22)
    ryn "…"

    $ showP("noam", "reflexion", 0.78)
    noam "Ouais."
    noam "Moi aussi."

    $ showP("ryn", "reflechit", 0.22)
    ryn "Au fait…"
    ryn "Ryn."

    $ showP("noam", "surpris", 0.78)
    noam "Hein ?"

    $ showP("ryn", "neutre", 0.22)
    ryn "Mon prénom."
    ryn "On est deux dans une salle avec une arme géante, autant faire ça propre."

    $ showP("noam", "sourire", 0.78)
    noam "Noam."

    $ showP("ryn", "determine", 0.22)
    ryn "Ok."

    $ showP("ryn", "reflechit", 0.22)
    ryn "C’est donc ça."

    "Il ne crie pas."
    "Il ne jure pas."
    "Il observe."

    $ showP("ryn", "reflechit", 0.22)
    ryn "Je pensais que c’était…"
    ryn "Plus loin."
    ryn "Ou plus caché."

    $ showP("noam", "hesitation", 0.78)
    noam "Caché de quoi ?"

    $ showP("ryn", "determine", 0.22)
    ryn "De nous."

    "Il s’approche de la vitre."
    "Pas trop."
    "Juste assez pour voir le fond de la fosse."

    $ showP("ryn", "reflechit", 0.22)
    ryn "Ils l’ont mis au centre comme on expose un trophé."
    ryn "Comme un rappel."

    $ showP("noam", "reflexion", 0.78)
    noam "Un rappel de quoi ?"

    $ showP("ryn", "determine", 0.22)
    ryn "De ce qui arrive quand quelqu’un oublie les règles et de la domination de Kami."

    "Je regarde les écrans."
    "Des lignes de données."
    "Des flux."
    "Rien de compréhensible."

    $ showP("noam", "reflexion", 0.78)
    noam "Tu crois vraiment qu’il fonctionne déjà ?"
    noam "Je veux dire…"
    noam "On vient d’arriver."

    $ showP("ryn", "determine", 0.22)
    ryn "Justement."

    "Il se tourne vers moi."

    $ showP("ryn", "colere2", 0.22)
    ryn "Tu crois qu’ils ont attendu qu’on soit là pour l’allumer ?"
    ryn "C'est sans doute ce canon là qui nous tire dessus depuis un an."

    "Je n’aime pas sa réponse."
    "Parce qu’elle fait sens."

    $ showP("noam", "inquiet", 0.78)
    noam "Donc là, maintenant…"

    $ showP("ryn", "determine", 0.22)
    ryn "Là, maintenant, il est prêt."

    "Un silence."
    "Pas confortable."

    $ showP("noam", "hesitation", 0.78)
    noam "Tu penses qu’il a déjà servi aujourd’hui ?"

    $ showP("ryn", "fatigue", 0.22)
    ryn "…"
    ryn "Je sais pas."

    "Il hésite."
    "Vraiment."

    $ showP("ryn", "inquiet", 0.22)
    ryn "J’espère que non."

    play sound sfx_beep
    "-Bip-"

    play music "music/bgm_system_override.mp3" fadein 1.0
    "Un bip sec."
    "Quelque part dans la salle."

    $ showP("ryn", "surpris", 0.22)
    "Ryn se fige."

    $ showP("noam", "surpris", 0.78)
    noam "C’était quoi ?"

    $ showP("ryn", "inquiet", 0.22)
    ryn "T’as entendu."

    $ showP("noam", "desaccord", 0.78)
    noam "Oui mais—"

    $ showP("ryn", "colere", 0.22)
    ryn "Chut."

    play sound sfx_beep
    "-Bip-"

    "Un deuxième bip."
    "Plus long."

    "Les anneaux lumineux au sol s’allument."
    "Lentement."
    "Un cercle après l’autre."

    $ showP("noam", "inquiet", 0.78)
    noam "Ryn…"

    $ showP("ryn", "determine", 0.22)
    ryn "Quelqu’un a fait une connerie."

    $ showP("noam", "desaccord", 0.78)
    noam "Comment tu peux savoir ça ?"

    $ showP("ryn", "reflechit", 0.22)
    ryn "Parce que rien ici ne s’active pour rien."

    "Je sens mon estomac se nouer."
    "Ce n’est plus de la curiosité."
    "C’est de l’anticipation."

    $ showP("noam", "hesitation", 0.78)
    noam "Une connerie comment ?"

    $ showP("ryn", "fatigue", 0.22)
    ryn "Un refus."
    ryn "Une violence."
    ryn "Un mot de trop."
    ryn "J’en sais rien."

    "Il serre les poings."

    $ showP("ryn", "colere2", 0.22)
    ryn "Mais quelqu’un, quelque part…"
    ryn "Vient de sortir du cadre."

    play sound sfx_gresillement
    scene bg_canon at adaptive_fullscreen,heavy_shake

    "La salle vibre."
    "Très légèrement."

    "Le canon s’illumine."
    "Une lueur bleue apparaît en son centre."

    $ showP("noam", "peur", 0.78)      # droite
    $ showP("ryn", "surpris", 0.22)    # gauche

    play sound sfx_laser_canon volume 8.0

    $ showP("noam", "desespoir", 0.78)
    noam "Putain…"
    noam "C’est réel."

    $ showP("ryn", "desaccord", 0.22)
    ryn "T’en doutais ?"

    $ showP("noam", "triste", 0.78)
    noam "J’espérais."

    "Les écrans changent."
    "Un flux vidéo apparaît."
    "Brouillé."
    "Inexploitable."

    $ showP("noam", "panne", 0.78)
    noam "On voit rien."

    $ showP("ryn", "determine", 0.22)
    ryn "C’est fait exprès."

    "Un grondement sourd."
    "Comme un orage enfermé."

    $ showP("noam", "inquiet", 0.78)
    noam "On devrait partir."

    $ showP("ryn", "fatigue", 0.22)
    ryn "Ouais."

    "Aucun de nous ne bouge."

    "Le tir part."

    "Un rayon brutal."
    "Vertical."
    "Il frappe la fosse."

    "La lumière envahit la salle."
    "Blanche."
    "Aveuglante."

    scene bg_canon at adaptive_fullscreen,heavy_shake

    $ showP("noam", "desespoir", 0.78)
    $ showP("ryn", "surpris", 0.22)

    "Le sol tremble."
    "La vitre vibre."

    "Je recule d’un pas."
    "Cette fois sans réfléchir."

    "Puis plus rien."
    "Le rayon s’éteint."
    "D’un coup."

    pause 0.8

    "Les anneaux repassent au minimum."
    "La salle redevient calme."

    "Trop calme."

    $ showP("noam", "inquiet", 0.78)
    noam "…"
    noam "Quelqu'un vient de mourir."

    "Ryn ne répond pas tout de suite."

    $ showP("ryn", "colere", 0.22)
    ryn "Ouais."

    $ showP("noam", "triste", 0.78)
    noam "On ne sait même pas qui."

    $ showP("ryn", "fatigue", 0.22)
    ryn "Non."
    ryn "Mais Kami, si."

    "Il se détourne du canon."
    "Pour la première fois."

    play music "music/bgm_unsaid_distance.mp3" fadein 1.0

    # Micro-shift : après le tir, Noam se recentre légèrement, Ryn se “referme”
    $ showP("noam", "reflexion", 0.70)
    $ showP("ryn", "fatigue", 0.30)

    ryn "Voilà."
    ryn "C’est ça, le Conclave."

    $ showP("noam", "reflexion", 0.70)
    noam "Une salle de réunion avec une arme."

    $ showP("ryn", "desaccord", 0.30)
    ryn "Non."
    ryn "Une arme avec une salle de réunion autour."
    ryn "Enfin, faut dire qu'il y a peu de chance qu'on fasse des réunions ici."

    $ showP("ryn", "jaloux", 0.30)
    ryn "C'est glauque."

    pause 0.5

    $ showP("ryn", "determine", 0.30)
    ryn "Et maintenant…"
    ryn "Chaque vote va avoir un poids."

    $ showP("noam", "raison", 0.70)
    noam "Parce qu’on saura ce qu’il y a derrière."

    $ showP("ryn", "reflechit", 0.30)
    ryn "Parce qu’on l’aura entendu."

    "Il me regarde."
    "Pas pour m’intimider."
    "Pour vérifier."

    $ showP("ryn", "inquiet", 0.30)
    ryn "Quand ça recommencera…"
    ryn "Tu feras semblant que t’as rien vu ?"

    $ showP("noam", "hesitation", 0.70)
    noam "…"

    $ showP("ryn", "determine", 0.30)
    ryn "Ou tu t’en souviendras ?"

    pause 0.4

    "Je n’ai pas de réponse à lui apporter."
    "Pas encore."
    "Nos choix peuvent avoir de véritables impacts ici."

    "Mais je sais une chose."
    "Je n’oublierai jamais ce bruit."
    
    call CHECK_ALL_SALLES_VISITEES

    jump CANON_TP


#2m30
# total : 31m20

default conclave_lock = True

label CONCLAVE_TP:
    scene bg_conclave at adaptive_fullscreen
    
    if conclave_lock:
        jump MAP_NOTHING_HERE
    else:
        jump CONCLAVE_ENTREE

label CONCLAVE_ENTREE:
    "Je rentre dans le Conclave"
    jump MAP_NOTHING_HERE
	
default dortoir_lock = True

label DORTOIR_TP:
    scene bg_dortoir at adaptive_fullscreen
    
    if dortoir_lock:
        jump MAP_NOTHING_HERE
    else:
        jump DORTOIR_ENTREE

label DORTOIR_ENTREE:
    "Je rentre dans les dortoirs"
    jump MAP_NOTHING_HERE
	
# -----------------------------------------------------------------------
# GYMNASE — même modèle que CANON
# - 2 persos seulement : Noam + Elias
# - Découverte : Elias s'entraîne / discussion légère
# - PNC : tapis / poids / vélo / ballon / retour
# -----------------------------------------------------------------------

default decouverte_gymnase = False


label GYMNASE_TP:
    scene bg_gymnase at adaptive_fullscreen

    if not decouverte_gymnase:
        jump decouverte_gymnase

    $ pnc_room = "pnc_gymnase"
    call screen pnc_gymnase()


# -----------------------------------------------------------------------
# Label d'exploration
# -----------------------------------------------------------------------

screen pnc_gymnase():

    modal True
    zorder 200

    # Cache définitivement l'ancienne scene
    add Solid("#000")

    # BG COVER — c'est LUI qui définit le scaling réel
    add "images/background/bg_gymnase.png" at cover_screen

    # Option : quitter au clic droit / ESC (retour au label appelant)
    key "game_menu" action Return()
    key "K_ESCAPE" action Return()

    # HOTSPOTS — doivent subir EXACTEMENT le même transform
    imagebutton:
        idle "images/background/interact/gymnase/tapis.png"
        hover "images/background/interact/gymnase/tapis_hover.png"
        focus_mask True
        xpos 0
        ypos 0
        at cover_screen
        action Jump("GYM_PNC_TAPIS")

    imagebutton:
        idle "images/background/interact/gymnase/banc.png"
        hover "images/background/interact/gymnase/banc_hover.png"
        focus_mask True
        xpos 0
        ypos 0
        at cover_screen
        action Jump("GYM_PNC_POIDS")

    imagebutton:
        idle "images/background/interact/retour.png"
        hover "images/background/interact/retour_hover.png"
        focus_mask True
        xpos 0
        ypos 0
        at cover_screen
        action Jump("OPEN_CONCLAVE_MAP")


label GYM_PNC_TAPIS:
    "Le tapis est encore tiède."
    "Quelqu'un a couru récemment."
    "Les réglages sont simples."
    "Vitesse. Inclinaison. Temps."
    think "Même ici, tout est calibré."
    jump GYMNASE_TP


label GYM_PNC_POIDS:
    "Des poids libres."
    "Des barres."
    "Des repères au sol comme dans une salle publique."
    "Mais tout est trop propre."
    "Trop rangé."
    think "On dirait un décor de pub."
    jump GYMNASE_TP


# Optionnel : si tu ajoutes un bouton retour graphique
label GYM_PNC_EXIT:
    return


# -----------------------------------------------------------------------
# Label d'histoire
# -----------------------------------------------------------------------

label decouverte_gymnase:

    $ decouverte_gymnase = True

    scene black
    play music "music/bgm_soft_neon_morning.mp3" fadein 1.0

    think "Il y a aussi un gymnase."
    think "Ils ont vraiment pensé à mettre de nombreuses salles différentes."

    pause 0.4

    scene bg_gymnase at adaptive_fullscreen with fade

    "Ça sent le caoutchouc."
    "Le produit de nettoyage aussi."
    "Comme partout dans les couloirs mais plus particulièrement là."

    "Un terrain est marqué sur le sol."
    "Il y a des tapis de courses, des machines et des poids parfaitement rangés."

    "Et au fond…"
    "Un type est en train de s'entraîner."

    $ showP("noam", "reflexion", 0.22)   # gauche
    $ showP("elias", "fatigue", 0.78)    # droite

    "Il fait une série."
    "Sans musique."
    "Sans parler."
    "Juste le bruit de sa respiration."
    "Et du métal."

    $ showP("noam", "hesitation", 0.22)
    noam "…"
    noam "Salut."

    $ showP("elias", "ecoute", 0.78)
    "Il termine sa lancée."
    "Repose la barre doucement."
    "Puis enfin, il me regarde."

    $ showP("elias", "neutre", 0.78)
    elias "Salut."

    $ showP("noam", "sourire", 0.22)
    noam "Je pensais être seul."
    noam "Visiblement non."

    $ showP("elias", "fatigue", 0.78)
    elias "J'aime le sport, ça m'évite de trop réflechir à tout ce qui peut se passer."

    $ showP("noam", "taquin", 0.22)
    noam "Ouais... J'imagine que c'est devenu une habitude depuis un an."

    $ showP("elias", "rire", 0.78)
    "Il rit de façon courte."

    $ showP("elias", "neutre", 0.78)
    elias "Oui. Mais pas spécialement à cause de Kami."
    elias "C'est clair que sa méthode est cruelle, mais elle obtient des résultats."
    elias "Avant on risquait de se prendre une balle à n'importe quel moment ou d'être emmené dans n'importe quelle guerre."
    
    "Il marque une pause un instant."
    
    $ showP("elias", "jaloux", 0.78)
    elias "Est-ce qu'on peut vraiment dire qu'on vit moins bien qu'avant ?"
    elias "Perso, je ne pourrai pas répondre à cette question."
    elias "Alors ça ne sert à rien de trop y réfléchir. C'est comme ça et c'est tout."

    pause 0.2
    "Je ne sais pas vraiment quoi répondre."
    "D'un côté, il touche juste. Le monde est plus paisible qu'autrefois."
    "Mais d'un autre, la moindre erreur entraine la mort."
    "Pas une simple punition."
    "La mort quoi."

    $ showP("noam", "reflexion", 0.22)
    noam "Au fait, je m'appelle Noam."
    noam "Je viens du district HARMONIE."

    $ showP("elias", "ecoute", 0.78)
    "Il hoche la tête, comme si ça validait une info dans sa tête."

    $ showP("elias", "neutre", 0.78)
    elias "Elias."
    elias "AXIOME."

    $ showP("noam", "surpris", 0.22)
    noam "AXIOME…"
    noam "La Forge."

    $ showP("elias", "content", 0.78)
    elias "Ouais. C'est là où on fabrique la majorité des trucs pour l'ensemble des districts."

    "Il dit ça sans fierté particulière."
    "Mais il sait dans son timbre de voix que AXIOME est nécessaire à tout le monde."
    "D'un autre côté, chacun des districts est nécessaire aux autres."
    "C'est pour ça qu'ils ont été découpé ainsi. Pour empêcher les tensions et nous rendre tous dépendants des autres."

    $ showP("noam", "reflexion", 0.22)
    noam "Tu t'entraînes pour quoi ?"

    $ showP("elias", "rire", 0.78)
    elias "Pour dormir. Le sport aide à mieux dormir."
    elias "Je me dis qu'une petite session avant le rendez-vous à 18h serait pas trop mal."
    elias "J'espère juste qu'il y a de quoi se doucher."

    $ showP("noam", "rire", 0.22)
    noam "Ah."
    noam "La meilleure raison."

    pause 0.3

    "Je m'approche du terrain."
    "Je regarde les repères au sol."
    "Ça me rappelle l'école."
    "Ça me rappelle avant."

    $ showP("noam", "triste", 0.22)
    "Ça me rappelle qi'avant on était innocent et les problèmes nous passaient au dessus de la tête."

    $ showP("elias", "ecoute", 0.78)
    elias "Tu fais du sport, toi ?"

    $ showP("noam", "hesitation", 0.22)
    noam "Avant, oui j'en faisais parfois."
    noam "Mais ça fait un moment que j'en ai pas fait …"
    noam "Je sais plus trop ce que je fais, honnêtement."

    $ showP("elias", "fatigue", 0.78)
    elias "C'est pour ça que je continue."
    elias "Quand tout change, il faut garder un truc stable."

    $ showP("elias", "neutre", 0.78)
    elias "C'est le principe."

    pause 0.2

    $ showP("noam", "taquin", 0.22)
    noam "Donc si je veux survivre ici…"
    noam "Je dois courir et soulever des trucs."

    $ showP("elias", "content", 0.78)
    elias "Et boire de l'eau."
    elias "Et respirer."
    elias "N'oublie pas, sinon merci les crampes !"

    $ showP("noam", "sourire", 0.22)
    noam "Merci docteur."

    $ showP("elias", "rire", 0.78)
    "Il souffle du nez."
    "Ça ressemble presque à un vrai rire."

    pause 0.3

    $ showP("elias", "ecoute", 0.78)
    elias "Tu sais ce qui est drôle ?"
    elias "Ils nous donnent un gymnase."
    elias "Comme si on était en colonie."
    elias "On soit, c'est pas pour me déplaire. C'était chouette les colonies."

    $ showP("noam", "reflexion", 0.22)
    noam "Ouais. Notre animateur est juste un peu plus cinglé que les autres."

    $ showP("elias", "neutre", 0.78)
    elias "Exactement."

    "Il regarde la machine de muscu."
    "Puis les lignes au sol."
    "Puis moi."

    $ showP("elias", "inquiet", 0.78)
    elias "Tu sais, ces 30 jours ici, ça va pas être simple."
    elias "On sera constamment sur nos gardes, pas que durant les votes."
    elias "On risque d'être fatigué, on risque d'être sur les nerfs."

    $ showP("noam", "inquiet", 0.22)
    noam "Tu crois que le sport change quelque chose ?"

    $ showP("elias", "neutre", 0.78)
    elias "Non. Pas forcément."
    elias "Mais ça permet au moins de se changer les idées."

    pause 0.3

    $ showP("noam", "reflexion", 0.22)
    "Je regarde le tapis puis les poids."

    think "Ils ne me font pas spécialement envie."
    think "Rien que l'idée d'avoir des courbatures me freine déjà."

    $ showP("noam", "hesitation", 0.22)
    noam "Bon, allez fais moi une démo, Sensei !"
    noam "Histoire de faire semblant d'être normal dans ce monde chelou."

    $ showP("elias", "content", 0.78)
    elias "Ok."
    elias "Mais tu m'écoutes hein."
    elias "Sinon tu vas te faire mal."

    $ showP("noam", "sourire", 0.22)
    noam "Promis."

    pause 0.4

    "Pendant quelques minutes…"
    "Il me montre les postures à adopter, le rythme de respiration à avoir."

    "C'est bête."
    "C'est simple."
    "Et mine de rien, ça fait quand même du bien."

    pause 1.0
    
    "Après une longue série d'exercices."

    $ showP("noam", "reflexion", 0.22)
    think "Je devrais aller voir ailleurs."
    
    call CHECK_ALL_SALLES_VISITEES

    jump GYMNASE_TP

# Durée : 2m30
# Total : 49m15

# -----------------------------------------------------------------------
# INFIRMERIE — même modèle que CANON
# - 2 persos seulement : Noam + Sael
# - Découverte : violence autorisée au Conclave (hors commandements)
# - PNC : casiers réfrigérés (morgue) / étagères (médicaments-poisons) /
#         table d'opération / bibliothèque scientifique / retour
# -----------------------------------------------------------------------

default decouverte_infirmerie = False

label INFIRMERIE_TP:
    scene bg_infirmerie at adaptive_fullscreen

    if not decouverte_infirmerie:
        jump decouverte_infirmerie

    $ pnc_room = "pnc_infirmerie"
    call screen pnc_infirmerie()


# -----------------------------------------------------------------------
# Label d'exploration
# -----------------------------------------------------------------------

screen pnc_infirmerie():

    modal True
    zorder 200

    add Solid("#000")

    # BG COVER
    add "images/background/bg_infirmerie.png" at cover_screen

    key "game_menu" action Return()
    key "K_ESCAPE" action Return()

    # HOTSPOTS

    imagebutton:
        idle "images/background/interact/infirmerie/morgue.png"
        hover "images/background/interact/infirmerie/morgue_hover.png"
        focus_mask True
        xpos 0
        ypos 0
        at cover_screen
        action Jump("INF_PNC_MORGUE")

    imagebutton:
        idle "images/background/interact/infirmerie/armoire.png"
        hover "images/background/interact/infirmerie/armoire_hover.png"
        focus_mask True
        xpos 0
        ypos 0
        at cover_screen
        action Jump("INF_PNC_ETAGERES")

    imagebutton:
        idle "images/background/interact/infirmerie/operation.png"
        hover "images/background/interact/infirmerie/operation_hover.png"
        focus_mask True
        xpos 0
        ypos 0
        at cover_screen
        action Jump("INF_PNC_TABLE")

    imagebutton:
        idle "images/background/interact/retour.png"
        hover "images/background/interact/retour_hover.png"
        focus_mask True
        xpos 0
        ypos 0
        at cover_screen
        action Jump("OPEN_CONCLAVE_MAP")


label INF_PNC_MORGUE:
    window auto

    "Les casiers réfrigérés occupent tout un pan de mur."
    "Des tiroirs longs."
    "Numérotés."
    "Avec des poignées épaisses."
    "Comme si on devait tirer fort."
    "Ou vite."

    think "Une morgue."
    think "Dans un endroit censé être… notre 'refuge'."

    "Le froid qui s’en dégage est propre."
    "Trop propre."
    "Ça sent le métal stérile et la désinfection."

    think "Ils ont prévu la place."
    think "Donc ils ont prévu le reste."

    jump INFIRMERIE_TP


label INF_PNC_ETAGERES:
    window auto

    "À gauche, des étagères pleines."
    "Boîtes blanches."
    "Flacons ambrés."
    "Poches scellées."
    "Certaines étiquettes sont nettes."
    "D’autres… volontairement vagues."

    "Je lis quelques mots."
    "Analgésique."
    "Sédatif."
    "Antibiotique."
    "Antidote."
    "Et, plus bas…"
    "Des symboles de danger."

    think "Médicaments et poisons."
    think "La frontière est parfois une question de dose."

    jump INFIRMERIE_TP


label INF_PNC_TABLE:
    window auto

    "Au fond, une table d’opération."
    "Éclairage directionnel."
    "Bras articulés."
    "Des instruments rangés dans des tiroirs."
    "Des machines qui attendent."
    "Écran de monitoring noir."
    "Comme un œil fermé."

    "Ça ne ressemble pas à une infirmerie de bureau."
    "Ça ressemble à un bloc."

    think "Donc ici… on répare."
    think "Ou on découpe."

    jump INFIRMERIE_TP


label INF_PNC_EXIT:
    return


# -----------------------------------------------------------------------
# Label d'histoire
# -----------------------------------------------------------------------

label decouverte_infirmerie:

    $ decouverte_infirmerie = True

    scene black
    play music "music/bgm_cold_metadata.mp3" fadein 1.0

    think "L'infirmerie."
    think "Un lieu qui serait anodin dans n'importe quel endroit."
    think "Mais ici, ça n'a rien de rassurant."

    pause 0.4

    scene bg_infirmerie at adaptive_fullscreen with fade

    "L’air est plus froid qu’ailleurs."
    "Et pas seulement à cause des machines."
    "Ça sent le désinfectant."
    "Le plastique neuf."
    "Et un truc comme si c'était métallique."

    "À gauche, il y a des étagères."
    "Plein de boîtes."
    "Plein de flacons."
    "Des produits qui sont alignés au millimètre près."

    "À droite, il y a des longs casiers réfrigérés."
    "Trop longs."
    "Trop nombreux."

    "Une longue table aseptisée trône au fond de la pièce."
    "Du matériel médical l'accompagne."
    "Et, dans un coin, une bibliothèque de revues scientifiques."
    "Comme si quelqu’un avait voulu ajouter une petite touche… humaine."

    $ showP("noam", "reflexion", 0.22)   # gauche
    $ showP("sael", "reflechit", 0.78)   # droite

    "La fille de tout à l'heure est déjà là."
    "Debout."
    "Les bras croisés."
    "Elle ne regarde pas les médicaments."
    "Elle regarde les casiers."

    $ showP("noam", "hesitation", 0.22)
    noam "Il semble y avoir ce qu'il faut pour se faire prescrire un truc."

    $ showP("sael", "sourire", 0.78)
    sael "Ouais."
    $ showP("sael", "taquin", 0.78)
    sael "Une cure contre les idées de merde."
    sael "Mais j’ai l’impression qu’il y a rupture de stock."

    $ showP("noam", "reflexion", 0.22)
    "Je suis son regard."
    "Les casiers."
    "Le mur froid."
    "Les poignées."

    $ showP("noam", "hesitation", 0.22)
    noam "Ne me dis pas que c'est ..."

    $ showP("sael", "mefiant", 0.78)
    sael "Oh je crois bien que si."
    sael "C'est une morgue."
    $ showP("sael", "reflechit", 0.78)
    
    sael "Regarde, on a chacun notre casier."
    
    "Elle pointe du doigt l'un des casiers."
    "Une étiquette se trouve à côté de la poignée."
    "Sael"
    
    $ showP("sael", "taquin", 0.78)
    
    sael "Et là il y a le tiens."
    
    "Elle pointe le casier où il y a écris Julian."
    
    $ showP("noam", "taquin", 0.22)
    
    noam "Ah non, je m'appelle pas Julian."
    
    $ showP("sael", "surpris", 0.78)
    
    "Elle semble désorientée un instant."
    sael "Hein ? Ah bon ?!"
    
    noam "Ben oui, si je te le dis."
    noam "Moi je m'appelle Noam."
    
    "Elle regarde les casiers et cherche quelque chose du regard."
    
    $ showP("sael", "determine", 0.78)
    
    sael "Rigole pas trop, tu as déjà ta place à la morgue toi aussi."

    "Un frisson me parcoure l'échine en entendant ce mot."

    $ showP("noam", "reflexion", 0.22)
    noam "Je croyais que les commandements empêchaient… tout ça."

    $ showP("sael", "desaccord", 0.78)
    sael "Ouais."
    sael "Ailleurs."
    $ showP("sael", "raison", 0.78)
    sael "Sauf qu’on est pas 'chez nous'."
    sael "On est au Conclave."

    "Elle désigne la pièce d’un mouvement du menton."
    "Les étagères."
    "La table."
    "Les casiers."

    $ showP("sael", "reflechit", 0.78)
    sael "Tu n’as pas fait attention, toi ?"
    sael "Ce petit détail qui change tout."
    sael "Ici, les commandements sont abolis."

    $ showP("noam", "hesitation", 0.22)
    noam "Tu veux dire…"

    $ showP("sael", "raison", 0.78)
    sael "Je veux dire que la violence est autorisée."
    $ showP("sael", "mefiant", 0.78)
    sael "Si ce n'est souhaitée."
    sael "Mais rien ne permet de confirmer ça."

    $ showP("noam", "panne", 0.22)
    "Je reste une seconde sans réponse."
    "Mon cerveau refuse l’information."
    "Puis il l’accepte, parce qu’il n’a pas vraiment le choix."
    "La présence d'une morgue en atteste."

    $ showP("noam", "peur", 0.22)
    noam "Donc… les commandements c'est ...."
    noam "Oh putain ça craint."

    $ showP("sael", "culpabilite", 0.78)
    sael "Ouais."

    "Comme si le simple fait de le dire lui collait quelque chose sur la langue."

    $ showP("noam", "reflexion", 0.22)
    noam "Et on est censés faire quoi avec ça ?"

    $ showP("sael", "determine", 0.78)
    sael "Déjà, le garder en tête."
    sael "Quand quelqu’un s’énerve."
    sael "Quand quelqu’un 'perd patience'."
    sael "Quand quelqu’un décide que c’est plus simple de régler un problème à l’ancienne."
    sael "Faut essayer de calmer le jeu."

    $ showP("noam", "hesitation", 0.22)
    noam "À l’ancienne…"
    noam "Faut dire que c'est une salle qui a déjà le frigo prévu pour le corps."

    $ showP("sael", "sourire", 0.78)
    sael "Voilà."
    $ showP("sael", "taquin", 0.78)
    sael "Ambiance conviviale quoi."

    "Elle tente l’humour."
    "Mais son regard glisse encore vers les casiers."
    "Comme un réflexe. Comme une obsession."

    $ showP("noam", "reflexion", 0.22)
    "Je fais quelques pas."
    "Je m’arrête devant les étagères."
    "Je lis des étiquettes."
    "Les noms des médicaments sont extrèmement compliqués, acétamino-bidule ; trigly-machin ..."
    "Je reconnais certaines racines à certains mots."
    "D’autres sont très flous."

    $ showP("noam", "hesitation", 0.22)
    noam "Et ça…"
    noam "C’est en libre-service ?"

    $ showP("sael", "mefiant", 0.78)
    sael "Bonne question."
    $ showP("sael", "reflechit", 0.78)
    sael "Mais si c’est là, c’est que quelqu’un doit pouvoir s’en servir."
    sael "Etant donné qu'il n'y a pas de robot dans cette pièce."
    sael "C'est probablement… n’importe qui."

    $ showP("noam", "culpabilite", 0.22)
    noam "Médicaments."
    noam "Poisons."
    noam "Sédatifs."
    noam "On coche toutes les cases, là."
    
    $ showP("sael", "taquin", 0.78)
    sael "Oh tu as l'oeil ! Il y a bien des poisons ici en plus de médicaments plus traditionnels."

    $ showP("sael", "desaccord", 0.78)
    
    sael "Il y a aussi la table au fond."
    
    $ showP("sael", "reflechit", 0.78)
    sael "Celle-là, c’est pas pour mettre un pansement."

    "Je regarde la table d’opération."
    "Les bras articulés."
    "Les écrans."
    "Les tiroirs."
    "Je déteste la manière dont tout paraît prêt."
    "Comme si toute la pièce n'attendait qu'une chose : que l'un d'entre nous se blesse."

    $ showP("noam", "peur", 0.22)
    noam "J’aime pas ça."

    $ showP("sael", "triste", 0.78)
    sael "Moi non plus."
    $ showP("sael", "raison", 0.78)
    sael "Mais c’est justement pour ça que je voulais venir."

    $ showP("noam", "reflexion", 0.22)
    noam "Pour te faire peur ?"

    $ showP("sael", "rire", 0.78)
    sael "Non."
    $ showP("sael", "reflechit", 0.78)
    sael "Pour me rappeler un truc."
    sael "Si ça dérape… Ou quand ça dérapera."
    $ showP("sael", "determine", 0.78)
    sael "Je veux être prête au moment où quelqu’un me sautera dessus."

    $ showP("noam", "hesitation", 0.22)
    noam "Tu parles comme si…"
    noam "Comme si tu t’y attendais."

    $ showP("sael", "mefiant", 0.78)
    sael "Je m’y attends pas."
    $ showP("sael", "raison", 0.78)
    sael "Je refuse juste d’être naïve."
    sael "Je m'y prépare."

    "Elle se tait une seconde."
    "Puis elle hausse les épaules, comme pour alléger."

    $ showP("sael", "taquin", 0.78)
    sael "Et puis…"
    sael "J’ai une réputation à tenir."
    $ showP("sael", "sourire", 0.78)
    sael "Je suis censé être 'la gosse des rues'."

    $ showP("noam", "rire", 0.22)
    noam "Ah."
    $ showP("noam", "taquin", 0.22)
    noam "Donc c’est ça."
    noam "Rien ne peut vraiment t'atteindre."

    $ showP("sael", "joie", 0.78)
    sael "Exactement."
    $ showP("sael", "taquin", 0.78)
    sael "Et je ne mourrais pas ici.."

    pause 0.4

    $ showP("noam", "reflexion", 0.22)
    noam "T’as dit tout à l’heure que tu 'n’espérais pas devoir t’en servir'."

    $ showP("sael", "triste", 0.78)
    sael "Ouais."

    $ showP("noam", "hesitation", 0.22)
    noam "De ta force ?"

    $ showP("sael", "culpabilite", 0.78)
    sael "Ouais."
    $ showP("sael", "reflechit", 0.78)
    sael "Dans mon district, à Limen, quand ça part en vrille…"
    sael "Fin, oublie ce que j'ai dis.."
    $ showP("sael", "triste", 0.78)
    sael "Je pense que personne n'a envie de voir ça ici.."

    $ showP("sael", "raison", 0.78)
    sael "Voilà."
    $ showP("sael", "determine", 0.78)
    sael "Donc je préfère espérer que rien n'arrive…"
    sael "Et me préparer au cas où."

    "Elle tapote doucement un casier."
    "Le métal renvoie un son sourd."

    $ showP("noam", "reflexion", 0.22)
    think "Une morgue."
    think "Des poisons."
    think "Une table d’opération."
    think "Et des revues scientifiques."

    pause 0.4

    $ showP("noam", "hesitation", 0.22)
    noam "On ressort, et on fait comme si tout était normal ?"

    $ showP("sael", "sourire", 0.78)
    sael "Ouais."
    $ showP("sael", "taquin", 0.78)
    sael "Comme des adultes responsables."
    sael "Si on est là, c'est pour une raison."
    sael "Il faut qu'on améliore la vie dans nos districts."

    $ showP("noam", "sourire", 0.22)
    noam "Génial."
    $ showP("noam", "rire", 0.22)
    noam "J’adore quand on me vend une journée tranquille."

    pause 0.5

    $ showP("noam", "reflexion", 0.22)
    "Je recule d’un pas."
    "Je jette un dernier regard aux casiers."
    "Puis aux étagères."
    "Puis à la table, au fond."

    think "Je devrais aller voir ailleurs."
    think "Il faut que je trouve un endroit moins morbide."
    
    call CHECK_ALL_SALLES_VISITEES

    jump INFIRMERIE_TP

# 3m20
# Total : 46m45

# -----------------------------------------------------------------------
# SALLE DE MAINTENANCE — même modèle que CANON
# - 2 persos seulement : Noam + Kael
# - Découverte : "l'envers" du Conclave (bruit, odeur d'huile, modules)
# - PNC : établi / armoire outils / panneau alimentation / retour
# - Détail : gros robot inerte au fond (repos/maintenance)
# -----------------------------------------------------------------------

default decouverte_salle_maintenance = False

label MAINTENANCE_TP:
    scene bg_maintenance at adaptive_fullscreen

    if not decouverte_salle_maintenance:
        jump decouverte_salle_maintenance

    $ pnc_room = "pnc_maintenance"
    call screen pnc_maintenance()


# -----------------------------------------------------------------------
# Label d'exploration
# -----------------------------------------------------------------------

screen pnc_maintenance():

    modal True
    zorder 200

    # Cache définitivement l'ancienne scene
    add Solid("#000")

    # BG COVER — c'est LUI qui définit le scaling réel
    add "images/background/bg_maintenance.png" at cover_screen

    # Option : quitter au clic droit / ESC (retour au label appelant)
    key "game_menu" action Return()
    key "K_ESCAPE" action Return()

    # HOTSPOTS — doivent subir EXACTEMENT le même transform
    imagebutton:
        idle "images/background/interact/salle_maintenance/etabli.png"
        hover "images/background/interact/salle_maintenance/etabli_hover.png"
        focus_mask True
        xpos 0
        ypos 0
        at cover_screen
        action Jump("MAINT_PNC_ETABLI")

    imagebutton:
        idle "images/background/interact/salle_maintenance/robot.png"
        hover "images/background/interact/salle_maintenance/robot_hover.png"
        focus_mask True
        xpos 0
        ypos 0
        at cover_screen
        action Jump("MAINT_PNC_ROBOT")

    imagebutton:
        idle "images/background/interact/retour.png"
        hover "images/background/interact/retour_hover.png"
        focus_mask True
        xpos 0
        ypos 0
        at cover_screen
        action Jump("OPEN_CONCLAVE_MAP")


label MAINT_PNC_ETABLI:
    "Un établi métallique."
    "Des clés plates de toutes les formes et de toutes les tailles sont alignées."
    "Des tournevis magnétiques."
    "Un chiffon plié au carré."
    jump MAINTENANCE_TP

label MAINT_PNC_ROBOT:

    window auto

    "Au fond, une masse énorme."
    "Un robot."
    "Ou une machine qui ressemble à un robot."
    "Kael m'avait dit qu'il était spécialisé dans l'exploration spatiale."
    "Inerte."
    "Comme un animal endormi."

    "Des câbles partent de son dos."
    "Ils disparaissent dans le mur."
    "Il a des plaques de protection ouvertes."
    "On voit l’intérieur."
    "Des pièces qui brillent faiblement."

    "Il ne bouge pas."
    "Mais il respire presque."
    "Pas de souffle."
    "Juste un léger cycle de lumière."

    think "Le gros Berthe dont parlait Kael."
    think "Ici, même les machines ont droit à une pause."

    pause 0.3

    jump MAINTENANCE_TP


# Optionnel : si tu ajoutes un bouton retour graphique
label MAINT_PNC_EXIT:
    return


# -----------------------------------------------------------------------
# Label d'histoire
# -----------------------------------------------------------------------

label decouverte_salle_maintenance:

    $ decouverte_salle_maintenance = True

    scene black
    play music "music/bgm_unsaid_distance.mp3" fadein 1.0

    think "Salle de maintenance."
    think "Le nom sonne comme une excuse."
    think "Comme si ici, on réparait juste des trucs."
    think "Si on devait réparer tout ce qui n'allait pas, il faudrait réparer le monde."

    pause 0.4

    scene bg_maintenance at adaptive_fullscreen with fade

    "Ça sent le métal chaud."
    "L’huile."
    "Et un truc plus sec, comme de la poussière d’électronique."
    "Le genre d’odeur qui colle au fond de la gorge."

    "La salle est grande."
    "Plus brute que le reste."
    "Des panneaux ouverts."
    "Des câbles dans des goulottes."
    "Des modules empilés sur des racks."

    "Et surtout : du silence."
    "Pas vraiment un silence doux mais assez reposant."
    "Un silence parfois perturbé par le vrombissement d'un moteur."

    $ showP("noam", "reflexion", 0.22)

    "Je fais deux pas."
    "Je m’arrête."
    "Parce que quelqu’un est déjà là."

    $ showP("kael", "neutre", 0.78)

    "Adossé à un support."
    "Les bras croisés."
    "Il a l’air parfaitement à sa place."

    $ showP("noam", "hesitation", 0.22)
    noam "Je te dérange ?"

    $ showP("kael", "taquin", 0.78)
    kael "Non."
    kael "J’avais juste besoin d’un endroit tranquille."
    kael "Noam c'est ça ? Moi c'est Kael."
    
    noam "Ouai."
    noam "On est vraiment dans un endroit étrange."

    $ showP("noam", "rire", 0.22)
    "Je souffle, un rire court."
    $ showP("noam", "reflexion", 0.22)
    "Sans conviction."

    $ showP("kael", "reflechit", 0.78)
    kael "T’as vu le reste ?"
    kael "La cafétéria, les salles…"
    kael "On dirait un campus."
    kael "Sauf que personne n’a choisi de s'y inscrire."
    kael "Tout le monde court partout, c'est assez bruyant."
    kael "Ici les gens n'y passent que quelques minutes. C'est assez calme."

    $ showP("noam", "desaccord", 0.22)
    noam "Ouais tu m'étonnes."
    noam "L'odeur d'huile peut en rébuter plus d'un."

    $ showP("kael", "rire", 0.78)
    kael "Exactement."
    kael "Au moins on est au calme ici."

    "Il hoche la tête vers le fond."
    "Je suis son regard."

    "Une masse inerte imposante est tranquillement entreposée à l'arrière de la salle."
    "Un gros robot. Il fait bien trois mètres de haut."
    "On pourrait presque avoir l'impression qu'il va se mettre à bouger d'un instant à l'autre."

    $ showP("noam", "surpris", 0.22)
    noam "C’est… quoi ça ? C'est impressionnant !"

    $ showP("kael", "reflechit", 0.78)
    kael "Le gros Berthe."
    kael "C’est comme ça qu’il s’appelle apparemment."
    
    "Kael montre du doigt une plaque derrière lui qui indique le nom du robot."
    "Enfin, je ne sais même pas si on peut vraiment appeler ça comme ça."
    
    $ showP("noam", "reflexion", 0.22)
    noam "Donc c’est pas juste un machin oublié."

    $ showP("kael", "neutre", 0.78)
    kael "Non."
    kael "C’est entretenu."
    kael "Et si c’est entretenu…"
    kael "c’est que ça peut servir."
    
    kael "Honnêtement, c'est pas si impressionnant que ça."
    kael "Il y a des prototypes beaucoup plus robustes ou rapides sur orbite."
    kael "Mais ça a l'air fonctionnel."

    pause 0.3

    $ showP("noam", "inquiet", 0.22)
    noam "Tu penses qu’il sert à quoi ?"

    $ showP("kael", "reflechit", 0.78)
    kael "C'est un modèle conçu pour deux raisons."
    
    "Il prend un temps de réponse, comme pour réfléchir à quels mots utiliser."
    
    kael "Il peut servir d'arme. Il est normalement équipé de fusils laser."
    kael "Mais ce n'est pas son point fort."
    kael "Il peut surtout aller dans l'espace."

    "Il dit ça calmement."
    "Trop calmement."
    "Comme s’il parlait de la météo."
    
    kael "Malgré sa taille, il est équipé de propulseurs, avec la faible gravité, il peut parcourir une longue distance sans problème."
    kael "C'est un robot d'exploration spatiale."

    $ showP("noam", "peur", 0.22)
    "Ça me fait froid dans le dos."

    pause 0.4

    $ showP("kael", "taquin", 0.78)
    kael "Bref."
    kael "Je suis venu ici pour réfléchir tranquillement à un truc."

    $ showP("noam", "reflexion", 0.22)
    noam "Pour réfléchir ?"

    $ showP("kael", "reflechit", 0.78)
    kael "Tu sais cette histoire d'amendements."
    kael "Les propositions."
    kael "Tout ce cirque."

    $ showP("noam", "desaccord", 0.22)
    noam "Tu vas pas me dire que t’es enthousiaste."

    $ showP("kael", "rire", 0.78)
    kael "Non. A quoi ça servirait ?"
    kael "Honnêtement, pour moi ce Conclave est plus un risque que quoi que ce soit."

    $ showP("kael", "culpabilite", 0.78)
    kael "Je pense qu’on devrait annoncer très vite aux autres nos propositions."
    kael "Pas juste ce qu'on vote."
    kael "Parce qu'à la moindre erreur des milliers de gens peuvent mourir par notre faute."

    $ showP("noam", "hesitation", 0.22)
    noam "Tu ne fais confiance en personne ?"

    $ showP("kael", "reflechit", 0.78)
    kael "Ce n'est pas ça."
    kael "Quand les gens paniquent, ils s’accrochent à n’importe quoi."
    kael "Si on en parle avant, nos propositions seront mieux cadrées et on est à peu près sûrs d'éviter une catastrophe."

    pause 0.3

    "Je regarde autour."
    "L’établi."
    "L’armoire."
    "Le panneau d’alimentation."
    "Tout est là."
    "Tout est prêt."

    $ showP("noam", "reflexion", 0.22)
    noam "Tu veux faire ça quand ?"
    noam "Tu as tenté d'en parler tout à l'heure, sans trop de réponses ..."

    $ showP("kael", "fatigue", 0.78)
    kael "Bientôt. Juste avant de déposer les amendements."
    kael "C'est vraiment nécessaire."
    
    "Il regarde dans le vide, comme perdu dans ses pensées."

    $ showP("noam", "culpabilite", 0.22)
    "Tu penses qu'on arrivera à faire avancer les choses ?"

    $ showP("noam", "triste", 0.22)
    noam "Je ne pense pas."

    $ showP("kael", "neutre", 0.78)
    kael "Et toi, Noam…"
    kael "t’as l’air de porter un sac qui n’est pas à toi."
    kael "Quelle modification vas-tu proposer ?"

    $ showP("noam", "desaccord", 0.22)
    noam "Franchement ? J'en sais rien du tout."

    $ showP("kael", "reflechit", 0.78)
    kael "C’est pas vraiment une réponse."

    pause 0.4

    $ showP("noam", "desespoir", 0.22)
    noam "Je sais."
    noam "Mais là, j’ai pas mieux."

    $ showP("kael", "neutre", 0.78)
    kael "Ouai je vois."
    kael "On est tous dans le même sac."

    "Il lance un regard au panneau d’alimentation."

    pause 0.5

    think "Cette salle de maintenance ressemble plus à un atelier."
    think "Et ce n'est pas pour me déplaire."
    
    call CHECK_ALL_SALLES_VISITEES

    jump MAINTENANCE_TP

# 3m
# Total : 43m25

# -----------------------------------------------------------------------
# SALLE D'OBSERVATION — même modèle que CANON
# - 2 persos seulement : Noam + Lysa
# - Découverte : ils sont dans l'espace
# - PNC : radio / vitre / retour
# - Parfois : passage d'un vaisseau (District ORBITE)
# -----------------------------------------------------------------------

default decouverte_salle_observation = False

label OBSERVATION_TP:
    scene bg_observation at adaptive_fullscreen

    if not decouverte_salle_observation:
        jump decouverte_salle_observation

    $ pnc_room = "pnc_observation"
    call screen pnc_observation()


# -----------------------------------------------------------------------
# Label d'exploration
# -----------------------------------------------------------------------

screen pnc_observation():

    modal True
    zorder 200

    # Cache définitivement l'ancienne scene
    add Solid("#000")

    # BG COVER — c'est LUI qui définit le scaling réel
    add "images/background/bg_observation.png" at cover_screen

    # Option : quitter au clic droit / ESC (retour au label appelant)
    key "game_menu" action Return()
    key "K_ESCAPE" action Return()

    # HOTSPOTS — doivent subir EXACTEMENT le même transform
    imagebutton:
        idle "images/background/interact/salle_observation/radio.png"
        hover "images/background/interact/salle_observation/radio_hover.png"
        focus_mask True
        xpos 0
        ypos 0
        at cover_screen
        action Jump("OBS_PNC_RADIO")

    imagebutton:
        idle "images/background/interact/salle_observation/vitre.png"
        hover "images/background/interact/salle_observation/vitre_hover.png"
        focus_mask True
        xpos 0
        ypos 0
        at cover_screen
        action Jump("OBS_PNC_VITRE")
        
    imagebutton:
        idle "images/background/interact/salle_observation/orbite.png"
        hover "images/background/interact/salle_observation/orbite_hover.png"
        focus_mask True
        xpos 0
        ypos 0
        at cover_screen
        action Jump("OBS_PNC_ORBITE")

    imagebutton:
        idle "images/background/interact/retour.png"
        hover "images/background/interact/retour_hover.png"
        focus_mask True
        xpos 0
        ypos 0
        at cover_screen
        action Jump("OPEN_CONCLAVE_MAP")


label OBS_PNC_RADIO:
    "La console radio est massive."
    "Plusieurs fréquences."
    "Des indicateurs de puissance."
    "Un micro sur bras articulé."
    "Tout est verrouillé."
    think "Donc on peut parler… mais pas appeler."
    jump OBSERVATION_TP


label OBS_PNC_VITRE:
    "Les vitres donnent sur le vide."
    "Pas une vue 'sur le dehors'."
    "Une vue sur l’espace."
    think "Difficile de s'habituer à ça."
    jump OBSERVATION_TP

label OBS_PNC_ORBITE:

    window auto

    "Je m’approche un peu plus de la vitre."
    "Mon regard se fixe sur la masse la plus imposante au loin."

    "Ce n’est pas une station."
    "Pas vraiment."
    "Trop mobile."
    "Trop structurée."

    "C'est sans doute un vaisseau."
    "Ou quelque chose qui en a la fonction."

    "Des lumières courent le long de sa coque."
    "Pas au hasard."
    "Des lignes nettes."
    "Presque… organisées."

    "Autour, d’autres silhouettes plus petites."
    "Elles apparaissent."
    "Disparaissent."
    "Comme si tout ça suivait un rythme précis."

    think "Le district ORBITE."
    think "Du moins, ce que j’imagine que c’est."

    "Rien ne semble nous prêter attention."
    "Aucune manœuvre."
    "Aucun signal visible."

    "Juste cette présence."
    "Lourde."
    "Constante."

    think "Ils sont là."
    think "Ils bougent."
    think "Ils vivent."

    think "Et moi… je regarde."

    pause 0.3

    jump OBSERVATION_TP


# Optionnel : si tu ajoutes un bouton retour graphique
label OBS_PNC_EXIT:
    return


# -----------------------------------------------------------------------
# Label d'histoire
# -----------------------------------------------------------------------

label decouverte_salle_observation:

    $ decouverte_salle_observation = True

    scene black
    play music "music/bgm_soft_neon_morning.mp3" fadein 1.0

    think "La salle d'observation."
    think "Le nom sonne calme."
    think "Presque normal."

    pause 0.4

    scene bg_observation at adaptive_fullscreen with fade

    "La salle est large."
    "Plus ouverte que les autres."
    "Comme un poste de commande."

    "À l’avant : une immense baie vitrée."
    "Et derrière : des consoles."
    "Des écrans."
    "Des appareils alignés avec une rigueur presque militaire."

    "Au centre, une console radio."
    "Pas un petit talkie."
    "Une vraie station."
    "Avec des boutons physiques."
    "Des curseurs."
    "Un micro lourd."

    $ showP("noam", "reflexion", 0.22)   # gauche
    $ showP("lysa", "reflexion", 0.78)   # droite

    "Lysa est déjà près de la vitre."
    "Elle ne touche rien."
    "Elle regarde dehors."

    $ showP("noam", "hesitation", 0.22)

    noam "Tu… regardes quoi ?"

    $ showP("lysa", "neutre", 0.78)
    lysa "Viens."

    "Je m’approche."
    "Et je comprends tout de suite."
    "Mon cerveau met une seconde à suivre."

    "Il n’y a pas de ville à proprement parlé."
    "Pas de ciel bleu éclatant."
    "Juste du noir."
    "Et des points scintillants."
    "Des étoiles."
    "Quand on plonge le regard, on voit une masse imposante et une sorte de gros vaisseau volant."

    $ showP("noam", "surpris", 0.22)

    noam "…"
    noam "Attends."

    $ showP("lysa", "sourire", 0.78)
    lysa "Ouais."

    $ showP("noam", "hesitation", 0.22)
    noam "On est…"

    $ showP("lysa", "taquin", 0.78)
    lysa "Dans l’espace ouai."

    "Elle le dit comme si c’était une évidence."
    "Mais son sourire la trahit."
    "Petit."
    "Presque enfantin."

    $ showP("noam", "desaccord", 0.22)

    noam "C’est pas possible."
    noam "On a marché dix minutes."

    $ showP("lysa", "reflexion", 0.78)
    lysa "Et on a été endormis dans des caissons."
    lysa "Donc oui."
    lysa "Tout est possible."

    "Je colle presque mon front à la vitre."
    "Le verre est froid."
    "Ultra froid."

    $ showP("noam", "surpris", 0.22)
    noam "C’est beau."
    $ showP("noam", "inquiet", 0.22)
    noam "Et ça me donne la nausée."

    $ showP("lysa", "sourire", 0.78)
    lysa "Je comprends."
    $ showP("lysa", "content", 0.78)
    lysa "Moi ça…"
    lysa "Ça me calme, bizarrement."

    $ showP("noam", "taquin", 0.22)
    noam "Toi t’es câblée à l’envers."

    $ showP("lysa", "rire", 0.78)
    lysa "Peut-être."
    $ showP("lysa", "reflexion", 0.78)
    lysa "Ou peut-être que j’avais besoin de voir un truc…"
    lysa "Qui change de notre quotidien."

    "Un long moment de silence s'en est suivi."
    "Mais pas un silence lourd."
    "Juste un calme reposant."

    "Je regarde les consoles derrière nous."
    "La radio."
    "Les écrans."
    "Tout a l'air fonctionnel."

    $ showP("noam", "reflexion", 0.22)
    noam "Tu crois qu’on peut contacter quelqu’un ?"

    $ showP("lysa", "triste", 0.78)
    lysa "Je ne sais pas me servir de ce truc."
    lysa "Sinon, j'aurai bien aimé appeler ma famille."

    $ showP("noam", "triste", 0.22)
    noam "Ouais."

    "Je m'avance vers la console radio."

    $ showP("noam", "determine", 0.22)
    noam "Mais ça doit pas être bien compliqué, attends ..."

    $ showP("lysa", "inquiet", 0.78)
    lysa "Je serai toi, j'éviterais de toucher à ça."
    lysa "On ne sait même pas si on a le droit de s'en servir."

    $ showP("noam", "rire", 0.22)
    "Je lâche un petit rire."
    $ showP("noam", "reflexion", 0.22)
    "Sans joie."

    pause 0.4

    "Un point lumineux bouge et passe à plusieurs dizaines de kilomètres de là."
    "Pas une étoile."
    "Le déplacement est trop régulier."
    "Trop droit."

    "Puis une silhouette passe."
    "Un vaisseau."
    "Petit et rapide."

    $ showP("noam", "surpris", 0.22)
    noam "Tu vois ça ?"
    "Je montre du doigt l'horizon."

    $ showP("lysa", "surpris", 0.78)
    lysa "Ouais."
    $ showP("lysa", "reflexion", 0.78)
    lysa "On est vraiment loin de chez nous."

    lysa "Regarde la trajectoire."
    lysa "Et les marqueurs sur le côté du vaisseau."

    "Sur le flanc, une bande lumineuse."
    "Un code."
    "Un motif propre."

    $ showP("lysa", "determine", 0.78)
    lysa "District ORBITE."
    lysa "On est dans leur domaine ici."
    $ showP("lysa", "reflexion", 0.78)
    lysa "Peut être que leurs représentants en savent plus que nous sur où nous sommes."

    $ showP("noam", "reflexion", 0.22)
    noam "Donc y’a du trafic."
    noam "Et y’a des gens dehors."

    $ showP("lysa", "blase", 0.78)
    lysa "Bien sûr qu’il y a des gens."
    $ showP("lysa", "triste", 0.78)
    lysa "On est juste… pas du même côté de la vitre."

    pause 0.4

    $ showP("noam", "reflexion", 0.22)
    noam "C’est fou."
    noam "Kami nous a mis dans l’espace."
    noam "Comme si c’était anodin…"
    noam "Comme si c'était juste un décor."

    $ showP("lysa", "reflexion", 0.78)
    lysa "C’est un décor."
    lysa "Mais c’est aussi un message."

    $ showP("noam", "hesitation", 0.22)
    noam "Lequel ?"

    $ showP("lysa", "determine", 0.78)
    lysa "Qu’on est hors du monde."
    lysa "Hors des règles."
    $ showP("lysa", "triste", 0.78)
    lysa "Hors de tout ce qu'on connait depuis là."

    $ showP("noam", "reflexion", 0.22)
    noam "Tu dis ça calmement."

    $ showP("lysa", "sourire", 0.78)
    lysa "Je fais semblant. J'essaye de me rassurer."
    $ showP("lysa", "taquin", 0.78)
    lysa "Ça marche une fois sur deux."

    $ showP("noam", "taquin", 0.22)
    noam "Joli ratio."

    $ showP("lysa", "rire", 0.78)
    lysa "Merci."

    "Elle reste face à la vitre."
    "Puis elle baisse un peu la voix."

    $ showP("lysa", "reflexion", 0.78)
    lysa "Tu sais ce qui est le pire ?"

    $ showP("noam", "neutre", 0.22)
    noam "Vas-y."

    $ showP("lysa", "triste", 0.78)
    lysa "J’arrive pas à décider si c’est magnifique…"
    lysa "Ou si c’est juste une autre façon de nous écraser."

    $ showP("noam", "raison", 0.22)
    noam "Les deux."

    $ showP("lysa", "blase", 0.78)
    lysa "Ouais."
    $ showP("lysa", "triste", 0.78)
    lysa "Probablement les deux."

    pause 0.5

    $ showP("noam", "reflexion", 0.22)
    "Je recule d’un pas."
    "Je regarde la radio."
    "Les écrans."
    "Les vitres."

    think "Je devrais aller voir ailleurs."
    
    call CHECK_ALL_SALLES_VISITEES

    jump OBSERVATION_TP

# Durée : 2m10
# Total : 33m30

default decouverte_salle_repos = False

label REPOS_TP:
    scene bg_repos at adaptive_fullscreen

    if not decouverte_salle_repos:
        jump decouverte_salle_repos

    $ pnc_room = "pnc_repos"
    call screen pnc_repos()


# -----------------------------------------------------------------------
# Label d'exploration
# -----------------------------------------------------------------------

screen pnc_repos():

    modal True
    zorder 200

    # Cache définitivement l'ancienne scene
    add Solid("#000")

    # BG COVER — c'est LUI qui définit le scaling réel
    add "images/background/bg_repos.png" at cover_screen

    # Option : quitter au clic droit / ESC (retour au label appelant)
    key "game_menu" action Return()
    key "K_ESCAPE" action Return()

    # HOTSPOTS — doivent subir EXACTEMENT le même transform
    imagebutton:
        idle "images/background/interact/salle_repos/babyfoot.png"
        hover "images/background/interact/salle_repos/babyfoot_hover.png"
        focus_mask True
        xpos 0
        ypos 0
        at cover_screen
        action Jump("REPOS_PNC_BABYFOOT")

    imagebutton:
        idle "images/background/interact/salle_repos/flechettes.png"
        hover "images/background/interact/salle_repos/flechettes_hover.png"
        focus_mask True
        xpos 0
        ypos 0
        at cover_screen
        action Jump("REPOS_PNC_FLECHETTES")

    imagebutton:
        idle "images/background/interact/salle_repos/arcade.png"
        hover "images/background/interact/salle_repos/arcade_hover.png"
        focus_mask True
        xpos 0
        ypos 0
        at cover_screen
        action Jump("REPOS_PNC_ARCADE")

    imagebutton:
        idle "images/background/interact/salle_repos/distributeur.png"
        hover "images/background/interact/salle_repos/distributeur_hover.png"
        focus_mask True
        xpos 0
        ypos 0
        at cover_screen
        action Jump("REPOS_PNC_DISTRIBUTEUR")

    imagebutton:
        idle "images/background/interact/salle_repos/canape.png"
        hover "images/background/interact/salle_repos/canape_hover.png"
        focus_mask True
        xpos 0
        ypos 0
        at cover_screen
        action Jump("REPOS_PNC_CANAPE")

    imagebutton:
        idle "images/background/interact/retour.png"
        hover "images/background/interact/retour_hover.png"
        focus_mask True
        xpos 0
        ypos 0
        at cover_screen
        action Jump("OPEN_CONCLAVE_MAP")


label REPOS_PNC_BABYFOOT:
    "Le babyfoot brille trop."
    "Comme s’il n’avait jamais vu une main humaine."
    think "Ils ont pensé à tout… sauf à la partie où on respire."
    jump REPOS_TP


label REPOS_PNC_FLECHETTES:
    "Un jeu de fléchettes."
    "Aimanté, sécurisé."
    "Même se détendre ici a l’air réglementé."
    jump REPOS_TP


label REPOS_PNC_ARCADE:
    "Une borne d’arcade."
    "Écran intact."
    "Liste de jeux préchargés."
    think "Au moins, ils ne nous demandent pas de voter pour débloquer le niveau 2."
    jump REPOS_TP


label REPOS_PNC_DISTRIBUTEUR:
    "Un distributeur de boissons."
    "Pas de prix."
    "Pas de monnaie."
    "Juste un choix."
    think "La seule chose gratuite, ici : l’illusion du choix."
    jump REPOS_TP


label REPOS_PNC_CANAPE:
    "Le canapé est large."
    "Trop propre."
    "Les coussins sont alignés au millimètre."
    think "Même le confort a un protocole."
    jump REPOS_TP


# Optionnel : si tu ajoutes un bouton retour graphique
label REPOS_PNC_EXIT:
    return
    
label decouverte_salle_repos:

    $ decouverte_salle_repos = True

    scene black
    play music "music/bgm_careful_wanting.mp3" fadein 1.0

    think "Ici, il y a une salle de repos."
    think "J’aurais presque envie d’y aller pour souffler et me remettre de mes émotions."

    pause 0.4

    scene bg_repos at adaptive_fullscreen with fade

    "La pièce semble étonnamment vivante."
    "Des jeux."
    "Un canapé."
    "Un distributeur."

    think "Quoi qu'on pense de notre situation, l'attention est louable."

    $ showP("noam", "reflexion", 0.22)

    "Un claquement sec résonne."
    "Une balle de babyfoot tape contre la paroi."
    
    hide noam
    
    scene bg_cg007 at adaptive_fullscreen with fade
    $ showP("noam", "vide", 0.1)
    $ showP("iris", "vide", 0.9)
    $ showP("julian", "vide", 0.5)
    
    "Il y a de l'animation dans la pièce."
    "Une animation difficile à rater."
    
    play sound sfx_balle volume 3.0

    julian "Hé hé ! Encore un but."

    noam "Ah."

    julian "T’as vu ?"
    julian "Même pas besoin d’échauffement."
    julian "Je te bats quand tu veux !"

    noam "Je viens d’arriver, laisse moi le temps."

    julian "C’est suffisant. T'as eu 3 secondes pour te préparer !"


    iris "Ignore-le."
    iris "Plus tu réponds, plus il parle."

    julian "C’est faux."
    julian "Je parle aussi très bien tout seul."

    noam "Vous vous connaissez ?"

    iris "Malheureusement."

    scene bg_repos at adaptive_fullscreen with fade
    
    $ showP("julian", "sourire", 0.78)
    $ showP("iris", "taquin", 0.50)

    julian "Hey."
    julian "On a survécu à trois réunions ensemble."
    julian "Ça crée des liens, inévitablement."

    iris "Crois moi, ça crée surtout des migraines."

    $ showP("julian", "taquin", 0.78)
    julian "Iris."
    julian "Fais pas gaffe, elle est toujours comme ça."
    julian "Toujours aussi chaleureuse."
    
    iris "Non. Juste avec toi."

    $ showP("noam", "sourire", 0.22)
    noam "Moi c'est Noam."

    julian "Julian."
    julian "Et oui, avant que tu demandes :"
    julian "Je suis à peu près bon dans quasiment tous les domaines."

    iris "Et allez c'est reparti ..."

    pause 0.2

    "Julian relance la balle."
    "Elle roule."
    "Il marque encore."

    $ showP("julian", "joie", 0.78)
    julian "Voilà."
    julian "Le Conclave peut attendre."

    $ showP("iris", "inquiet", 0.50)
    iris "Non."
    iris "T'as beau dire qu'il attendra, ça m'étonnerait que Kami change les règles pour tes beaux yeux."
    
    $ showP("julian", "taquin", 0.78)
    julian "Même toi tu confirmes que j'ai des beaux yeux."
    
    $ showP("iris", "taquin", 0.50)
    iris "Par pitié, oublie ce que j'ai dis."

    pause 0.2

    $ showP("noam", "reflexion", 0.22)
    noam "Ça vous dérange pas ?"
    noam "Qu’il y ait… tout ça."

    "Je désigne la salle."
    "Les jeux."
    "Le confort."

    $ showP("iris", "reflexion", 0.50)
    iris "Ils ont le sens du détail. Des babyfoot à quelques dizaines de mètres d'un canon qui a tué des millions de personne."
    iris "Mais bon je préfère être là. C'est au moins un peu plus chaleureux."

    $ showP("julian", "neutre", 0.78)
    julian "Moi je trouve ça honnête."
    julian "Ils savent qu’on risque de craquer-"
    julian "Enfin, que vous risquiez de craquer."
    julian "Alors ils vous donnent de quoi tenir."

    $ showP("noam", "hesitation", 0.22)
    noam "Tenir jusqu’à quoi ?"

    julian "Jusqu’au prochain vote."
    julian "Puis le suivant."
    julian "Et encore après."

    $ showP("iris", "triste", 0.50)
    iris "Tu dis ça trop calmement."
    iris "Faut dire que ça ne te ressemble pas."

    play sound sfx_balle volume 3.0
    julian "Je suis concentré sur ma partie."

    iris "Évidemment."
    iris "Contre ton ennemi imaginaire."

    pause 0.3

    "Iris s’enfonce un peu plus dans le canapé."
    "Elle regarde le plafond."

    $ showP("iris", "fatigue", 0.50)
    iris "Il a toujours été comme ça avant."
    iris "Toujours à faire le malin."
    iris "Toujours à détourner l’attention."

    $ showP("julian", "sourire", 0.78)
    julian "Et pourtant t’es là."

    iris "Parce que j’avais pas le choix."

    $ showP("noam", "reflexion", 0.22)
    think "Personne n’a vraiment le choix ici."

    pause 0.3

    $ showP("noam", "neutre", 0.22)
    noam "Bon."
    noam "Je vais continuer à faire le tour."

    $ showP("julian", "taquin", 0.78)
    play sound sfx_balle volume 2.0
    julian "Quand tu veux perdre au babyfoot, tu sais où me trouver."

    $ showP("iris", "sourire", 0.50)
    iris "Ou quand t’auras besoin de silence, ne viens pas ici du coup."
    iris "Je devrais peut être aller aux archives, il n'y aura pas ce casse pied."

    $ showP("noam", "sourire", 0.22)
    noam "Je retiens."
    
    call CHECK_ALL_SALLES_VISITEES

    jump REPOS_TP

# 1m45
# Total : 38m05

# -----------------------------------------------------------------------
# SAS DE LIVRAISON — même modèle que CANON
# - 2 persos seulement : Noam + Mara
# - Découverte : logistique, livraisons régulières
# - PNC : porte du sas / caisses / combinaisons / terminal / retour
# -----------------------------------------------------------------------

default decouverte_sas = False


label LIVRAISON_TP:
    scene bg_sas at adaptive_fullscreen

    if not decouverte_sas:
        jump decouverte_sas

    $ pnc_room = "pnc_livraison"
    call screen pnc_livraison()


# -----------------------------------------------------------------------
# Label d'exploration
# -----------------------------------------------------------------------

screen pnc_livraison():

    modal True
    zorder 200

    add Solid("#000")

    add "images/background/bg_sas.png" at cover_screen

    key "game_menu" action Return()
    key "K_ESCAPE" action Return()

    imagebutton:
        idle "images/background/interact/livraison/porte.png"
        hover "images/background/interact/livraison/porte_hover.png"
        focus_mask True
        xpos 0
        ypos 0
        at cover_screen
        action Jump("LIV_PNC_PORTE")

    imagebutton:
        idle "images/background/interact/livraison/caisses.png"
        hover "images/background/interact/livraison/caisses_hover.png"
        focus_mask True
        xpos 0
        ypos 0
        at cover_screen
        action Jump("LIV_PNC_CAISSES")

    imagebutton:
        idle "images/background/interact/livraison/combinaisons.png"
        hover "images/background/interact/livraison/combinaisons_hover.png"
        focus_mask True
        xpos 0
        ypos 0
        at cover_screen
        action Jump("LIV_PNC_COMBIS")

    imagebutton:
        idle "images/background/interact/livraison/terminal.png"
        hover "images/background/interact/livraison/terminal_hover.png"
        focus_mask True
        xpos 0
        ypos 0
        at cover_screen
        action Jump("LIV_PNC_TERMINAL")

    imagebutton:
        idle "images/background/interact/retour.png"
        hover "images/background/interact/retour_hover.png"
        focus_mask True
        xpos 0
        ypos 0
        at cover_screen
        action Jump("OPEN_CONCLAVE_MAP")


label LIV_PNC_PORTE:
    window auto

    "La porte du sas occupe tout le mur du fond."
    "Elle est épaisse, renforcée, bardée de verrous et de pictogrammes jaunes."
    "Même fermée, elle donne l’impression d’être en tension."
    "Comme si quelque chose, de l’autre côté, appuyait déjà."

    think "C’est pas une porte qu’on ouvre."
    think "C’est une porte qu’on autorise."

    jump LIVRAISON_TP


label LIV_PNC_CAISSES:
    window auto

    "Les caisses sont disposées avec une précision presque maniaque."
    "Toutes de la même taille."
    "Toutes marquées."
    "Certaines ont des traces d’impact, des coins râpés, des éraflures profondes."
    "D’autres sont encore trop propres pour être honnêtes."

    think "Elles n’ont pas été fabriquées ici."
    think "Elles ont voyagé."
    think "Et elles voyageront encore."

    jump LIVRAISON_TP


label LIV_PNC_COMBIS:
    window auto

    "Trois combinaisons pressurisées sont suspendues dans un renfoncement."
    "Alignées."
    "Silencieuses."
    "Les casques noirs reflètent la lumière bleutée du sas."

    think "On ne montre pas ce genre de choses si on n’envisage pas de s’en servir."
    think "Pas ici."

    jump LIVRAISON_TP


label LIV_PNC_TERMINAL:
    window auto

    "Un terminal logistique est fixé au mur."
    "L’écran est déjà allumé."
    "Pas de mot de passe."
    "Juste une interface froide, directe."

    "Je fais défiler."
    "Dates."
    "Statuts."
    "Réceptions prévues."

    "J7."
    "J14."
    "J21."
    "J28."

    think "Une livraison par semaine."
    think "Même ça, c’est ritualisé."

    jump LIVRAISON_TP


label LIV_PNC_EXIT:
    return


# -----------------------------------------------------------------------
# Label d'histoire
# -----------------------------------------------------------------------

label decouverte_sas:

    $ decouverte_sas = True

    scene black
    play music "music/bgm_soft_neon_morning.mp3" fadein 1.0

    think "Sas de livraison."
    think "Pourquoi les livraisons auraient-elles besoin de passer par un sas ?"
    think "Comme si les livraisons pouvaient être toxiques ou infectées."

    pause 0.4

    scene bg_sas at adaptive_fullscreen with fade

    "La pièce est vaste, froide, presque clinique."
    "Le sol reflète les lumières bleues du plafond."
    "Tout est net."
    "Trop net."

    "Des caisses longent les murs."
    "Des machines de contrôle bourdonnent doucement."
    "Et au fond, il y a cette porte."
    "Impossible à ignorer."

    $ showP("noam", "reflexion", 0.22)
    think "Ils ont vraiment pensé à tout."
    think "Même à la façon dont on allait oublier qu’on dépend d’eux."

    "Près de la porte, quelqu’un est déjà là."
    "Une femme."
    "Immobile."
    "Bras croisés."
    "Le regard fixé sur le sas, comme si elle attendait qu’il fasse une erreur."

    $ showP("mara", "mefiant", 0.78)

    $ showP("noam", "hesitation", 0.22)
    noam "…"
    noam "Euh…"
    noam "Salut."

    $ showP("mara", "jaloux", 0.78)
    mara "Hein ?"
    mara "Ah—"
    $ showP("mara", "neutre", 0.78)
    mara "Salut."

    pause 0.2

    $ showP("noam", "reflexion", 0.22)
    noam "Je voulais pas te faire peur."
    noam "C’est juste que…"
    noam "je pensais pas tomber sur quelqu’un ici."

    $ showP("mara", "doute", 0.78)
    mara "Ouais."
    mara "En général, les gens passent vite."
    mara "Ils regardent la porte."
    mara "Ils comprennent."
    mara "Et ils repartent."

    $ showP("noam", "sourire", 0.22)
    noam "Et toi ?"

    $ showP("mara", "stress", 0.78)
    mara "Moi je reste."
    mara "J’aime bien savoir comment les choses peuvent mal tourner."
    mara "Rien de mieux que de connaître parfaitement les lieux pour ça."

    pause 0.3

    $ showP("noam", "neutre", 0.22)
    noam "J'imagine que tu viens d'Axiome alors ?"
    
    noam "Moi c'est Noam."
    noam "District HARMONIE."

    $ showP("mara", "neutre", 0.78)
    mara "Mara."
    mara "Et Bingo, je viens bien d'Axiome."

    $ showP("noam", "taquin", 0.22)
    noam "Ah."
    noam "D'où le côté un peu professionnel."

    $ showP("mara", "rire", 0.78)
    mara "Seulement un peu ?"

    pause 0.3

    "Je m’approche d’une caisse."
    "Elle est lourde."
    "Même sans l’ouvrir, on le sent."

    $ showP("noam", "reflexion", 0.22)
    noam "Tu crois que ce sas sera utile ?"

    $ showP("mara", "doute", 0.78)
    mara "Euh…"
    mara "Ouais."
    mara "Les livraisons devraient normalement arriver une fois par semaine."

    $ showP("mara", "reflexion", 0.78)
    mara "C’est réglé à la perfection."
    mara "J7, J14, J21, J28."
    mara "Toujours à la même heure apparemment."

    $ showP("noam", "surpris", 0.22)
    noam "Ils ont déjà prévu tout ça ?"
    noam "Genre…"
    noam "jusqu’à la fin du Conclave ?"

    $ showP("mara", "doute", 0.78)
    mara "Au moins on est surs d'avoir des livraisons régulièrement."

    pause 0.3

    $ showP("noam", "reflexion", 0.22)
    think "Même la nourriture arrive sous calendrier strict."

    $ showP("noam", "sourire", 0.22)
    noam "C’est con, mais…"
    noam "savoir que ça arrive toutes les semaines, ça rassure."

    $ showP("mara", "stress", 0.78)
    mara "Ouais."
    mara "C’est exactement pour ça que ça m’angoisse."

    pause 0.3

    $ showP("noam", "inquiet", 0.22)
    noam "Pourquoi ?"

    $ showP("mara", "reflexion", 0.78)
    mara "Parce que ça veut aussi dire que si on a le moindre soucis…"
    mara "On ne pourra être livré que lors de ces jours particuliers."

    pause 0.4

    "Je regarde la porte."
    "Puis les combinaisons."
    "Puis les caisses."

    think "Même l’espoir arrive emballé."

    pause 0.4

    $ showP("noam", "reflexion", 0.22)
    think "Je devrais aller voir ailleurs."

    call CHECK_ALL_SALLES_VISITEES

    jump LIVRAISON_TP

# -----------------------------------------------------------------------
# SALLE DE STOCKAGE — même modèle que CANON
# - 2 persos seulement : Noam + Nyra
# - Découverte : abondance de matériel, libre accès encadré
# - PNC : étagères / caisses au sol / terminal d'inventaire / règlement / retour
# -----------------------------------------------------------------------

default decouverte_stockage = False


label STOCKAGE_TP:
    scene bg_stockage at adaptive_fullscreen

    if not decouverte_stockage:
        jump decouverte_stockage

    $ pnc_room = "pnc_stockage"
    call screen pnc_stockage()


# -----------------------------------------------------------------------
# Label d'exploration
# -----------------------------------------------------------------------

screen pnc_stockage():

    modal True
    zorder 200

    add Solid("#000")

    # BG COVER
    add "images/background/bg_stockage.png" at cover_screen

    key "game_menu" action Return()
    key "K_ESCAPE" action Return()

    # HOTSPOTS

    imagebutton:
        idle "images/background/interact/stockage/etageres.png"
        hover "images/background/interact/stockage/etageres_hover.png"
        focus_mask True
        xpos 0
        ypos 0
        at cover_screen
        action Jump("STO_PNC_ETAGERES")

    imagebutton:
        idle "images/background/interact/stockage/caisses.png"
        hover "images/background/interact/stockage/caisses_hover.png"
        focus_mask True
        xpos 0
        ypos 0
        at cover_screen
        action Jump("STO_PNC_CAISSES")

    imagebutton:
        idle "images/background/interact/stockage/reglement.png"
        hover "images/background/interact/stockage/reglement_hover.png"
        focus_mask True
        xpos 0
        ypos 0
        at cover_screen
        action Jump("STO_PNC_REGLEMENT")

    imagebutton:
        idle "images/background/interact/retour.png"
        hover "images/background/interact/retour_hover.png"
        focus_mask True
        xpos 0
        ypos 0
        at cover_screen
        action Jump("OPEN_CONCLAVE_MAP")


label STO_PNC_ETAGERES:
    window auto

    "Les étagères montent presque jusqu’au plafond."
    "Bacs plastiques."
    "Cartons bruns."
    "Caisses métalliques."

    "Tout est étiqueté."
    "Outils."
    "Consommables."
    "Pièces de rechange."
    "Matériel de maintenance."

    think "C’est pas un placard."
    think "C’est une réserve pour tenir trente jours…"
    think "Ou pour tenir un siège."

    jump STOCKAGE_TP


label STO_PNC_CAISSES:
    window auto

    "Des caisses au sol, par groupes."
    "Certaines sont ouvertes."
    "D'autres scellées avec un verrou simple."

    "Je repère des rouleaux de câbles."
    "Des lampes."
    "Des kits de réparation."
    "Et des trucs que je n’identifie même pas."

    think "Le genre d’endroit où tu trouves toujours ce que tu cherches."
    think "Et où tu te demandes pourquoi on te le donne."

    jump STOCKAGE_TP


label STO_PNC_REGLEMENT:
    window auto

    "Un écran numériquue indique le réglement de la salle de stockage."
    "Écrit en gros, comme pour des enfants."

    "— Matériel en libre accès."
    "— Prenez ce dont vous avez besoin."
    "— Tout prélèvement est enregistré."
    "— Livraison hebdomadaire des matériaux manquants."
    "— Dégradation volontaire = sanction."

    think "Ils te donnent la clé."
    think "Et ils te rappellent où est la lame."

    jump STOCKAGE_TP


label STO_PNC_EXIT:
    return


# -----------------------------------------------------------------------
# Label d'histoire
# -----------------------------------------------------------------------

label decouverte_stockage:

    $ decouverte_stockage = True

    scene black
    play music "music/bgm_soft_neon_morning.mp3" fadein 1.0

    think "Salle de stockage."
    think "Le mot est banal, presque anodin."
    think "Mais si c'est vide… on est morts."
    think "Donc j'espère que ça ne l'est pas."

    pause 0.4

    scene bg_stockage at adaptive_fullscreen with fade

    "La pièce est immense."
    "Il y a des étagères partout."
    "Et des caisses au sol, comme si quelqu’un avait livré ça hier."

    "Ça sent le métal froid."
    "Et le carton neuf."
    "Un drôle de mélange olfactif."

    $ showP("noam", "reflexion", 0.22)

    think "Ok."
    think "Ils ont vraiment prévu de quoi durer."

    "Au fond, une silhouette est déjà là."
    "Accroupie devant une caisse."
    "Elle trie et fouille dans les caisses sans se presser."

    $ showP("nyra", "fatigue", 0.78)

    "Elle sort un rouleau de câble."
    "Le repose."
    "Puis attrape une lampe."
    "Comme si elle faisait ses courses."

    $ showP("noam", "hesitation", 0.22)
    noam "…"
    $ showP("noam", "neutre", 0.22)
    noam "Salut."

    "Elle relève la tête."
    "Pas paniquée."
    "Juste surprise, une demi-seconde."

    $ showP("nyra", "surpris", 0.78)
    nyra "Oh. Euh..."
    $ showP("nyra", "neutre", 0.78)
    nyra "Salut."

    pause 0.2

    $ showP("noam", "reflexion", 0.22)
    noam "Je pensais tomber sur…"
    noam "genre un placard."
    noam "Avec trois tournevis et une boîte de pansements."

    $ showP("nyra", "rire", 0.78)
    nyra "Ouais."
    nyra "Moi j'avais imaginé une armoire qui ferme à clé."
    nyra "Et un petit mot du style : 'demander gentiment'."

    "Elle désigne la salle du menton."

    $ showP("nyra", "raison", 0.78)
    nyra "Mais non."
    nyra "C’est open bar."

    $ showP("noam", "surpris", 0.22)
    noam "Open bar…"
    noam "Sous Kami ?!"
    noam "C’est illégal dans tous les districts de se servir dans du stockage comme ça."

    $ showP("nyra", "taquin", 0.78)
    nyra "Ici, y’a plus de pays, et pas de districts."
    nyra "Ça simplifie."

    pause 0.3

    "Je m'approche."
    "Je lis des étiquettes."
    "Je vois des quantités."
    "Beaucoup trop."

    $ showP("noam", "reflexion", 0.22)
    think "C’est rassurant."
    think "Et en fait ça m’inquiète en même temps."

    $ showP("noam", "neutre", 0.22)
    noam "Je m'appelle Noam."
    noam "HARMONIE."

    $ showP("nyra", "neutre", 0.78)
    nyra "Nyra."
    nyra "ORBITE."

    $ showP("noam", "surpris", 0.22)
    noam "ORBITE."
    noam "Ok…"
    noam "Donc toi, tu dois avoir l’habitude des salles qui ressemblent à des hangars."

    $ showP("nyra", "rire", 0.78)
    nyra "Pas vraiment."
    nyra "Chez nous, tout est plus…"
    $ showP("nyra", "reflexion", 0.78)
    nyra "compact."
    nyra "Optimisé."
    nyra "Ici, franchement, la place c’est le grand luxe."
    nyra "Ça me fait presque bizarre."

    pause 0.2

    $ showP("noam", "taquin", 0.22)
    noam "Tu fais quoi, du coup ?"
    noam "Shopping ?"

    $ showP("nyra", "sourire", 0.78)
    nyra "Je regarde ce qu’ils ont laissé traîner."
    nyra "Parce que si y'a un problème…"
    $ showP("nyra", "raison", 0.78)
    nyra "c'est mieux de le savoir avant d'en avoir besoin."

    $ showP("noam", "raison", 0.22)
    noam "Ça c'est très ORBITE."
    noam "Prévoir la panne avant la panne."

    $ showP("nyra", "taquin", 0.78)
    nyra "Merci."
    nyra "On a une réputation à tenir."

    pause 0.3

    "Je repère un panneau sur le côté."
    "Plastifié."
    "Écrit gros."

    $ showP("noam", "reflexion", 0.22)
    noam "Matériel en libre accès…"
    noam "Sérieux ?"

    $ showP("nyra", "raison", 0.78)
    nyra "Ouais."
    nyra "Tu prends ce qu’il te faut."
    nyra "Tu remets après si tu as finis."

    $ showP("noam", "sourire", 0.22)
    noam "Et si j'embarque des souvenirs ?"

    $ showP("nyra", "taquin", 0.78)
    nyra "Ben…"
    nyra "Faut dire que les règles ne l'interdisent pas."

    $ showP("noam", "rire", 0.22)
    "Je ris rapidement."

    pause 0.3

    $ showP("noam", "reflexion", 0.22)
    noam "C’est marrant."
    noam "Ils nous donnent de quoi tenir."
    noam "De quoi réparer des trucs."
    noam "De quoi s’organiser."
    noam "Comme si on nous invitait à revenir à la vie d'il y a un an."

    $ showP("nyra", "reflexion", 0.78)
    nyra "Ouais."
    $ showP("nyra", "fatigue", 0.78)
    nyra "C’est pas de la gentillesse."
    nyra "C’est de l’efficacité."

    $ showP("noam", "raison", 0.22)
    noam "Tu penses que c’est pour qu’on se bouffe moins entre nous ?"

    $ showP("nyra", "raison", 0.78)
    nyra "Je pense que c’est pour qu’on tienne."
    nyra "Et pour que le show continue."
    nyra "Je crois que Kami a envie de nous voir 'dans notre état naturel'."
    $ showP("nyra", "taquin", 0.78)
    nyra "Désolée si je casse l’ambiance."

    $ showP("noam", "sourire", 0.22)
    noam "Non, c’est bien."
    noam "Au moins, c’est clair."

    pause 0.4

    "Je regarde une dernière fois la salle."
    "Les caisses."
    "Les étagères."
    "Le terminal."

    think "Le simple fait de fouiller dans un entrepot public est interdit dans les districts."
    think "Ici les règles ont vraiment été abolies ..."

    pause 0.4

    $ showP("noam", "reflexion", 0.22)
    think "Je devrais aller voir ailleurs."
    
    call CHECK_ALL_SALLES_VISITEES

    jump STOCKAGE_TP

# Durée : 2m10
# Total: 51m25